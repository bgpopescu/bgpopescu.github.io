<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lecture 6-7</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="script_lecture6-7_files/libs/clipboard/clipboard.min.js"></script>
<script src="script_lecture6-7_files/libs/quarto-html/quarto.js"></script>
<script src="script_lecture6-7_files/libs/quarto-html/popper.min.js"></script>
<script src="script_lecture6-7_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="script_lecture6-7_files/libs/quarto-html/anchor.min.js"></script>
<link href="script_lecture6-7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="script_lecture6-7_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="script_lecture6-7_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="script_lecture6-7_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="script_lecture6-7_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#step1-reading-the-csv-files" id="toc-step1-reading-the-csv-files" class="nav-link active" data-scroll-target="#step1-reading-the-csv-files"><span class="toc-section-number">1</span>  Step1: Reading the CSV files</a></li>
  <li><a href="#step2-using-dplyr-to-calcultate-means-for-life-expectancy" id="toc-step2-using-dplyr-to-calcultate-means-for-life-expectancy" class="nav-link" data-scroll-target="#step2-using-dplyr-to-calcultate-means-for-life-expectancy"><span class="toc-section-number">2</span>  Step2: Using DPLYR to calcultate means for Life Expectancy</a></li>
  <li><a href="#step3-labeling-latin-american-countries" id="toc-step3-labeling-latin-american-countries" class="nav-link" data-scroll-target="#step3-labeling-latin-american-countries"><span class="toc-section-number">3</span>  Step3: Labeling Latin American countries</a></li>
  <li><a href="#step4-labeling-eu-countries" id="toc-step4-labeling-eu-countries" class="nav-link" data-scroll-target="#step4-labeling-eu-countries"><span class="toc-section-number">4</span>  Step4: Labeling EU countries</a></li>
  <li><a href="#step5-using-dplyr-to-calculate-means-for-urbanization" id="toc-step5-using-dplyr-to-calculate-means-for-urbanization" class="nav-link" data-scroll-target="#step5-using-dplyr-to-calculate-means-for-urbanization"><span class="toc-section-number">5</span>  Step5: Using DPLYR to calculate means for Urbanization</a></li>
  <li><a href="#step6-merging-data" id="toc-step6-merging-data" class="nav-link" data-scroll-target="#step6-merging-data"><span class="toc-section-number">6</span>  Step6: Merging Data</a></li>
  <li><a href="#step7-removing-nas" id="toc-step7-removing-nas" class="nav-link" data-scroll-target="#step7-removing-nas"><span class="toc-section-number">7</span>  Step7: Removing NAs</a></li>
  <li><a href="#tables" id="toc-tables" class="nav-link" data-scroll-target="#tables"><span class="toc-section-number">8</span>  Tables</a>
  <ul class="collapse">
  <li><a href="#table-1-mean-for-x" id="toc-table-1-mean-for-x" class="nav-link" data-scroll-target="#table-1-mean-for-x"><span class="toc-section-number">8.1</span>  Table 1: Mean for X</a></li>
  <li><a href="#table-2-mean-for-x-and-y" id="toc-table-2-mean-for-x-and-y" class="nav-link" data-scroll-target="#table-2-mean-for-x-and-y"><span class="toc-section-number">8.2</span>  Table 2: Mean for X and Y</a></li>
  <li><a href="#table-3-deviations-for-x-operation" id="toc-table-3-deviations-for-x-operation" class="nav-link" data-scroll-target="#table-3-deviations-for-x-operation"><span class="toc-section-number">8.3</span>  Table 3: Deviations for X Operation</a></li>
  <li><a href="#table-4-deviations-for-x-result" id="toc-table-4-deviations-for-x-result" class="nav-link" data-scroll-target="#table-4-deviations-for-x-result"><span class="toc-section-number">8.4</span>  Table 4: Deviations for X Result</a></li>
  <li><a href="#table-5-deviations-for-y-operation" id="toc-table-5-deviations-for-y-operation" class="nav-link" data-scroll-target="#table-5-deviations-for-y-operation"><span class="toc-section-number">8.5</span>  Table 5: Deviations for Y Operation</a></li>
  <li><a href="#table-6-deviations-for-y-result" id="toc-table-6-deviations-for-y-result" class="nav-link" data-scroll-target="#table-6-deviations-for-y-result"><span class="toc-section-number">8.6</span>  Table 6: Deviations for Y Result</a></li>
  <li><a href="#table-7-deviations-for-x-squared-operation" id="toc-table-7-deviations-for-x-squared-operation" class="nav-link" data-scroll-target="#table-7-deviations-for-x-squared-operation"><span class="toc-section-number">8.7</span>  Table 7: Deviations for X Squared Operation</a></li>
  <li><a href="#table-8-deviations-for-x-squared-results" id="toc-table-8-deviations-for-x-squared-results" class="nav-link" data-scroll-target="#table-8-deviations-for-x-squared-results"><span class="toc-section-number">8.8</span>  Table 8: Deviations for X Squared Results</a></li>
  <li><a href="#table-9-deviations-for-y-squared-operation" id="toc-table-9-deviations-for-y-squared-operation" class="nav-link" data-scroll-target="#table-9-deviations-for-y-squared-operation"><span class="toc-section-number">8.9</span>  Table 9: Deviations for Y Squared Operation</a></li>
  <li><a href="#table-10-deviations-for-y-squared-result" id="toc-table-10-deviations-for-y-squared-result" class="nav-link" data-scroll-target="#table-10-deviations-for-y-squared-result"><span class="toc-section-number">8.10</span>  Table 10: Deviations for Y Squared Result</a></li>
  <li><a href="#table-11-sum-of-deviations-for-x-squared" id="toc-table-11-sum-of-deviations-for-x-squared" class="nav-link" data-scroll-target="#table-11-sum-of-deviations-for-x-squared"><span class="toc-section-number">8.11</span>  Table 11: Sum of Deviations for X Squared</a></li>
  <li><a href="#table-12-sum-of-deviations-for-y-squared" id="toc-table-12-sum-of-deviations-for-y-squared" class="nav-link" data-scroll-target="#table-12-sum-of-deviations-for-y-squared"><span class="toc-section-number">8.12</span>  Table 12: Sum of Deviations for Y Squared</a></li>
  <li><a href="#table-13-multiplying-deviations-from-x-with-deviations-from-y" id="toc-table-13-multiplying-deviations-from-x-with-deviations-from-y" class="nav-link" data-scroll-target="#table-13-multiplying-deviations-from-x-with-deviations-from-y"><span class="toc-section-number">8.13</span>  Table 13: Multiplying Deviations from X with Deviations from Y</a></li>
  <li><a href="#deviation-ox-x-and-y-added" id="toc-deviation-ox-x-and-y-added" class="nav-link" data-scroll-target="#deviation-ox-x-and-y-added"><span class="toc-section-number">8.14</span>  Deviation ox X and Y added</a></li>
  </ul></li>
  <li><a href="#next-lecture" id="toc-next-lecture" class="nav-link" data-scroll-target="#next-lecture"><span class="toc-section-number">9</span>  Next Lecture</a>
  <ul class="collapse">
  <li><a href="#table-14-mean-for-x" id="toc-table-14-mean-for-x" class="nav-link" data-scroll-target="#table-14-mean-for-x"><span class="toc-section-number">9.1</span>  Table 14: Mean for X</a></li>
  <li><a href="#table-15-mean-for-x-and-y" id="toc-table-15-mean-for-x-and-y" class="nav-link" data-scroll-target="#table-15-mean-for-x-and-y"><span class="toc-section-number">9.2</span>  Table 15: Mean for X and Y</a></li>
  <li><a href="#table-16-original-table" id="toc-table-16-original-table" class="nav-link" data-scroll-target="#table-16-original-table"><span class="toc-section-number">9.3</span>  Table 16: Original Table</a></li>
  <li><a href="#table-17-adding-b" id="toc-table-17-adding-b" class="nav-link" data-scroll-target="#table-17-adding-b"><span class="toc-section-number">9.4</span>  Table 17: Adding b</a></li>
  <li><a href="#table-18-adding-a" id="toc-table-18-adding-a" class="nav-link" data-scroll-target="#table-18-adding-a"><span class="toc-section-number">9.5</span>  Table 18: Adding a</a></li>
  <li><a href="#table-19-adding-y-hat" id="toc-table-19-adding-y-hat" class="nav-link" data-scroll-target="#table-19-adding-y-hat"><span class="toc-section-number">9.6</span>  Table 19: Adding Y hat</a></li>
  <li><a href="#table-20-adding-y-hat---highlighting-x" id="toc-table-20-adding-y-hat---highlighting-x" class="nav-link" data-scroll-target="#table-20-adding-y-hat---highlighting-x"><span class="toc-section-number">9.7</span>  Table 20: Adding Y hat - Highlighting X</a></li>
  <li><a href="#table-21-adding-y-hat---highlighting-x-and-b" id="toc-table-21-adding-y-hat---highlighting-x-and-b" class="nav-link" data-scroll-target="#table-21-adding-y-hat---highlighting-x-and-b"><span class="toc-section-number">9.8</span>  Table 21: Adding Y hat - Highlighting X and b</a></li>
  <li><a href="#table-22-adding-y-hat---highlighting-x-b-and-a" id="toc-table-22-adding-y-hat---highlighting-x-b-and-a" class="nav-link" data-scroll-target="#table-22-adding-y-hat---highlighting-x-b-and-a"><span class="toc-section-number">9.9</span>  Table 22: Adding Y hat - Highlighting X, b, and a</a></li>
  <li><a href="#table-23-adding-y-hat---highlighting-x-column" id="toc-table-23-adding-y-hat---highlighting-x-column" class="nav-link" data-scroll-target="#table-23-adding-y-hat---highlighting-x-column"><span class="toc-section-number">9.10</span>  Table 23: Adding Y hat - Highlighting X column</a></li>
  <li><a href="#table-24-adding-the-y-hat---doing-the-algebra" id="toc-table-24-adding-the-y-hat---doing-the-algebra" class="nav-link" data-scroll-target="#table-24-adding-the-y-hat---doing-the-algebra"><span class="toc-section-number">9.11</span>  Table 24: Adding the Y hat - Doing the Algebra</a></li>
  <li><a href="#picture-regressions" id="toc-picture-regressions" class="nav-link" data-scroll-target="#picture-regressions"><span class="toc-section-number">9.12</span>  Picture regressions</a></li>
  <li><a href="#focus-on-the-us-uk-spain-itlay-and-china" id="toc-focus-on-the-us-uk-spain-itlay-and-china" class="nav-link" data-scroll-target="#focus-on-the-us-uk-spain-itlay-and-china"><span class="toc-section-number">9.13</span>  Focus on the US, UK, Spain, Itlay, and China</a></li>
  <li><a href="#table-25-adding-y-hat---china-italy-spain-uk-us" id="toc-table-25-adding-y-hat---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-25-adding-y-hat---china-italy-spain-uk-us"><span class="toc-section-number">9.14</span>  Table 25: Adding Y hat - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-26-adding-y-hat-calculation---china-italy-spain-uk-us" id="toc-table-26-adding-y-hat-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-26-adding-y-hat-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.15</span>  Table 26: Adding Y hat Calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#figure-8" id="toc-figure-8" class="nav-link" data-scroll-target="#figure-8"><span class="toc-section-number">9.16</span>  Figure 8</a></li>
  <li><a href="#table-27-adding-residual---china-italy-spain-uk-us" id="toc-table-27-adding-residual---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-27-adding-residual---china-italy-spain-uk-us"><span class="toc-section-number">9.17</span>  Table 27: Adding Residual - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-28-adding-residual-calculation---china-italy-spain-uk-us" id="toc-table-28-adding-residual-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-28-adding-residual-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.18</span>  Table 28: Adding Residual Calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-29-adding-mean---china-italy-spain-uk-us" id="toc-table-29-adding-mean---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-29-adding-mean---china-italy-spain-uk-us"><span class="toc-section-number">9.19</span>  Table 29: Adding Mean - China, Italy, Spain, UK, US</a></li>
  <li><a href="#figure11" id="toc-figure11" class="nav-link" data-scroll-target="#figure11"><span class="toc-section-number">9.20</span>  Figure11</a></li>
  <li><a href="#table-30-subtracting-mean---china-italy-spain-uk-us" id="toc-table-30-subtracting-mean---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-30-subtracting-mean---china-italy-spain-uk-us"><span class="toc-section-number">9.21</span>  Table 30: Subtracting Mean - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-31-subtracting-mean-calculation---china-italy-spain-uk-us" id="toc-table-31-subtracting-mean-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-31-subtracting-mean-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.22</span>  Table 31: Subtracting Mean Calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-32-squaring-residuals-and-mean-substraction---china-italy-spain-uk-us" id="toc-table-32-squaring-residuals-and-mean-substraction---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-32-squaring-residuals-and-mean-substraction---china-italy-spain-uk-us"><span class="toc-section-number">9.23</span>  Table 32: Squaring Residuals and Mean Substraction - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-33-squaring-residuals-and-mean-substraction-calculation---china-italy-spain-uk-us" id="toc-table-33-squaring-residuals-and-mean-substraction-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-33-squaring-residuals-and-mean-substraction-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.24</span>  Table 33: Squaring Residuals and Mean Substraction Calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-34-adding-the-squared-residuals---china-italy-spain-uk-us" id="toc-table-34-adding-the-squared-residuals---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-34-adding-the-squared-residuals---china-italy-spain-uk-us"><span class="toc-section-number">9.25</span>  Table 34: Adding the Squared Residuals - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-35-adding-the-squared-residuals---china-italy-spain-uk-us" id="toc-table-35-adding-the-squared-residuals---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-35-adding-the-squared-residuals---china-italy-spain-uk-us"><span class="toc-section-number">9.26</span>  Table 35: Adding the Squared Residuals - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-36-calculating-the-x-residual---china-italy-spain-uk-us" id="toc-table-36-calculating-the-x-residual---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-36-calculating-the-x-residual---china-italy-spain-uk-us"><span class="toc-section-number">9.27</span>  Table 36: Calculating the X residual - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-37-calculating-the-x-residual-calculation---china-italy-spain-uk-us" id="toc-table-37-calculating-the-x-residual-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-37-calculating-the-x-residual-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.28</span>  Table 37: Calculating the X residual calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-38-squaring-the-x-residuals---china-italy-spain-uk-us" id="toc-table-38-squaring-the-x-residuals---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-38-squaring-the-x-residuals---china-italy-spain-uk-us"><span class="toc-section-number">9.29</span>  Table 38: Squaring the X residuals - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-39-squaring-the-x-residuals-calculation---china-italy-spain-uk-us" id="toc-table-39-squaring-the-x-residuals-calculation---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-39-squaring-the-x-residuals-calculation---china-italy-spain-uk-us"><span class="toc-section-number">9.30</span>  Table 39: Squaring the X residuals calculation - China, Italy, Spain, UK, US</a></li>
  <li><a href="#table-40-adding-the-sum-of-squared-residuals-from-x---china-italy-spain-uk-us" id="toc-table-40-adding-the-sum-of-squared-residuals-from-x---china-italy-spain-uk-us" class="nav-link" data-scroll-target="#table-40-adding-the-sum-of-squared-residuals-from-x---china-italy-spain-uk-us"><span class="toc-section-number">9.31</span>  Table 40: Adding the Sum of Squared Residuals from X - China, Italy, Spain, UK, US</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 6-7</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"formatR"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"quarto"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"gghighlight"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"xtable"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># detach(package:plyr)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"lemon"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture8/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="step1-reading-the-csv-files" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Step1: Reading the CSV files</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>life_expectancy <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"./life-expectancy.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>urbanization <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"./share-of-population-urban.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new environment </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">conda_create</span>(<span class="st">"r-reticulate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>+ '/Users/bgpopescu/Library/r-miniconda-arm64/bin/conda' 'create' '--yes' '--name' 'r-reticulate' 'python=3.8' '--quiet' '-c' 'conda-forge'</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/bgpopescu/Library/r-miniconda-arm64/envs/r-reticulate/bin/python"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install SciPy</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#conda_install("r-reticulate", "geopandas", "numpy")</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">py_install</span>(<span class="st">"geopandas"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>+ '/Users/bgpopescu/Library/r-miniconda-arm64/bin/conda' 'install' '--yes' '--prefix' '/Users/bgpopescu/Library/r-miniconda-arm64/envs/r-reticulate' '-c' 'conda-forge' 'geopandas'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv (<span class="st">'./life-expectancy.csv'</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Entity Code  Year  Life expectancy at birth (historical)
0      Afghanistan  AFG  1950                                   27.7
1      Afghanistan  AFG  1951                                   28.0
2      Afghanistan  AFG  1952                                   28.4
3      Afghanistan  AFG  1953                                   28.9
4      Afghanistan  AFG  1954                                   29.2
...            ...  ...   ...                                    ...
20440     Zimbabwe  ZWE  2017                                   60.7
20441     Zimbabwe  ZWE  2018                                   61.4
20442     Zimbabwe  ZWE  2019                                   61.3
20443     Zimbabwe  ZWE  2020                                   61.1
20444     Zimbabwe  ZWE  2021                                   59.3

[20445 rows x 4 columns]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Entity"</span>][<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'Afghanistan'</code></pre>
</div>
</div>
</section>
<section id="step2-using-dplyr-to-calcultate-means-for-life-expectancy" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Step2: Using DPLYR to calcultate means for Life Expectancy</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>life_expectancy2 <span class="ot">&lt;-</span> life_expectancy <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Code, Entity) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">life_expectancy =</span> <span class="fu">mean</span>(Life.expectancy.at.birth..historical.))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing continents</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>life_expectancy3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(life_expectancy2, life_expectancy2<span class="sc">$</span>Code <span class="sc">!=</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting only relevant vars</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing unnecessary files</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(life_expectancy, life_expectancy2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step3-labeling-latin-american-countries" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Step3: Labeling Latin American countries</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Other" "Latam"</code></pre>
</div>
</div>
</section>
<section id="step4-labeling-eu-countries" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Step4: Labeling EU countries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>eu_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Austria"</span>, <span class="st">"Belgium"</span>, <span class="st">"Bulgaria"</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Croatia"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Czechia"</span>, <span class="st">"Denmark"</span>, <span class="st">"Estonia"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Finland"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>, <span class="st">"Greece"</span>, <span class="st">"Hungary"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Ireland"</span>, <span class="st">"Italy"</span>, <span class="st">"Latvia"</span>, <span class="st">"Lithuania"</span>, <span class="st">"Luxembourg"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Malta"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Poland"</span>, <span class="st">"Portugal"</span>, <span class="st">"Romania"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Spain"</span>, <span class="st">"Sweden"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>life_expectancy3<span class="sc">$</span>continent[life_expectancy3<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    eu_countries] <span class="ot">&lt;-</span> <span class="st">"EU"</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(life_expectancy3<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Other" "Latam" "EU"   </code></pre>
</div>
</div>
</section>
<section id="step5-using-dplyr-to-calculate-means-for-urbanization" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Step5: Using DPLYR to calculate means for Urbanization</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>urbanization2 <span class="ot">&lt;-</span> urbanization <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Code) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">urbanization =</span> <span class="fu">mean</span>(Urban.population....of.total.population.))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing continents</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>urbanization3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(urbanization2, urbanization2<span class="sc">$</span>Code <span class="sc">!=</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting only relevant vars Removing</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># unnecessary dataframes</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(urbanization, urbanization2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step6-merging-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Step6: Merging Data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>final <span class="ot">&lt;-</span> <span class="fu">left_join</span>(life_expectancy3, urbanization3,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="at">Code =</span> <span class="st">"Code"</span>))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing unnecessary dataframes</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(life_expectancy3, urbanization3)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the LATAM dataset</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>final_latam <span class="ot">&lt;-</span> <span class="fu">subset</span>(final, continent <span class="sc">==</span> <span class="st">"Latam"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the EU dataset</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>final_eu <span class="ot">&lt;-</span> <span class="fu">subset</span>(final, continent <span class="sc">==</span> <span class="st">"EU"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the EU-World dataset</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>final_eu_world <span class="ot">&lt;-</span> final</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>final_eu_world<span class="sc">$</span>continent[final_eu_world<span class="sc">$</span>continent <span class="sc">==</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Latam"</span>] <span class="ot">&lt;-</span> <span class="st">"Other"</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the LATAM EU dataset</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>final_latam_eu <span class="ot">&lt;-</span> <span class="fu">subset</span>(final, continent <span class="sc">==</span> <span class="st">"Latam"</span> <span class="sc">|</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    continent <span class="sc">==</span> <span class="st">"EU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step7-removing-nas" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Step7: Removing NAs</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>final_new <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(final)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>final_new <span class="ot">&lt;-</span> <span class="fu">subset</span>(final_new, <span class="at">select =</span> <span class="fu">c</span>(Entity, life_expectancy,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    urbanization))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>population_urbanization_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(final_new<span class="sc">$</span>urbanization,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> T)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>population_urbanization_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(final_new<span class="sc">$</span>urbanization,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> T)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>population_life_expectancy_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(final_new<span class="sc">$</span>life_expectancy,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> T)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>population_life_expectancy_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(final_new<span class="sc">$</span>life_expectancy,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> T)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>example_df <span class="ot">&lt;-</span> final_new</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Step8: Correlation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(final_new<span class="sc">$</span>urbanization, final_new<span class="sc">$</span>life_expectancy,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6303347</code></pre>
</div>
</div>
</section>
<section id="tables" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Tables</h1>
<section id="table-1-mean-for-x" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="table-1-mean-for-x"><span class="header-section-number">8.1</span> Table 1: Mean for X</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Zimbabwe"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>example_df <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df, example_df[<span class="fu">order</span>(Entity), ])</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df[example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest, ]</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest))</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)), <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(population_urbanization_mean,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>))</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-2-mean-for-x-and-y" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="table-2-mean-for-x-and-y"><span class="header-section-number">8.2</span> Table 2: Mean for X and Y</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df[example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>))</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-3-deviations-for-x-operation" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="table-3-deviations-for-x-operation"><span class="header-section-number">8.3</span> Table 3: Deviations for X Operation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" - "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(<span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-4-deviations-for-x-result" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="table-4-deviations-for-x-result"><span class="header-section-number">8.4</span> Table 4: Deviations for X Result</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-5-deviations-for-y-operation" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="table-5-deviations-for-y-operation"><span class="header-section-number">8.5</span> Table 5: Deviations for Y Operation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from Y</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" - "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(<span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-6-deviations-for-y-result" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="table-6-deviations-for-y-result"><span class="header-section-number">8.6</span> Table 6: Deviations for Y Result</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from Y</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-7-deviations-for-x-squared-operation" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="table-7-deviations-for-x-squared-operation"><span class="header-section-number">8.7</span> Table 7: Deviations for X Squared Operation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_sq <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"$"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization), <span class="dv">3</span>)), <span class="st">"^{2}"</span>, <span class="st">"$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-8-deviations-for-x-squared-results" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="table-8-deviations-for-x-squared-results"><span class="header-section-number">8.8</span> Table 8: Deviations for X Squared Results</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-9-deviations-for-y-squared-operation" class="level2" data-number="8.9">
<h2 data-number="8.9" class="anchored" data-anchor-id="table-9-deviations-for-y-squared-operation"><span class="header-section-number">8.9</span> Table 9: Deviations for Y Squared Operation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y_sq <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"$"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy), <span class="dv">3</span>)), <span class="st">"^{2}"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-10-deviations-for-y-squared-result" class="level2" data-number="8.10">
<h2 data-number="8.10" class="anchored" data-anchor-id="table-10-deviations-for-y-squared-result"><span class="header-section-number">8.10</span> Table 10: Deviations for Y Squared Result</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-11-sum-of-deviations-for-x-squared" class="level2" data-number="8.11">
<h2 data-number="8.11" class="anchored" data-anchor-id="table-11-sum-of-deviations-for-x-squared"><span class="header-section-number">8.11</span> Table 11: Sum of Deviations for X Squared</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>sum_x_dev_no <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_sq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>sum_x_dev <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (x_{i} - </span><span class="sc">\\</span><span class="st">mu{X})^2$}"</span>,</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(sum_x_dev_no, <span class="dv">3</span>))</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum_x_dev)</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-12-sum-of-deviations-for-y-squared" class="level2" data-number="8.12">
<h2 data-number="8.12" class="anchored" data-anchor-id="table-12-sum-of-deviations-for-y-squared"><span class="header-section-number">8.12</span> Table 12: Sum of Deviations for Y Squared</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>sum_x_dev_no <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_sq)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>sum_y_dev_no <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_y_sq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>sum_x_dev <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (x_{i} - </span><span class="sc">\\</span><span class="st">mu{X})^2$}"</span>,</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(sum_x_dev_no, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>sum_y_dev <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (y_{i} - </span><span class="sc">\\</span><span class="st">mu{Y})^2$}"</span>,</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(sum_y_dev_no, <span class="dv">3</span>))</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum_x_dev)</span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum_y_dev)</span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllrr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-13-multiplying-deviations-from-x-with-deviations-from-y" class="level2" data-number="8.13">
<h2 data-number="8.13" class="anchored" data-anchor-id="table-13-multiplying-deviations-from-x-with-deviations-from-y"><span class="header-section-number">8.13</span> Table 13: Multiplying Deviations from X with Deviations from Y</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_y <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>deviation_x <span class="sc">*</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>deviation_y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">mu{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>for_pres_table <span class="ot">&lt;-</span> <span class="fu">xtable</span>(for_pres)</span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a><span class="fu">align</span>(for_pres_table) <span class="ot">&lt;-</span> <span class="st">"lllllrrr"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="deviation-ox-x-and-y-added" class="level2" data-number="8.14">
<h2 data-number="8.14" class="anchored" data-anchor-id="deviation-ox-x-and-y-added"><span class="header-section-number">8.14</span> Deviation ox X and Y added</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deviation from X</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_y <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>deviation_x_y <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>deviation_x <span class="sc">*</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>deviation_y</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>sum_deviation_x_y <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_y)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>sum_deviation_x_y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28193.37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>sum_deviation_x_y2 <span class="ot">&lt;-</span> <span class="fu">sum</span>((example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization)) <span class="sc">*</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy)))</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>sum_deviation_x_y2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28193.37</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28193.37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_y)<span class="sc">/</span><span class="dv">213</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 132.3632</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>life_expectancy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.643744</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>urbanization))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24.18021</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>life_expectancy)) <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>urbanization))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 209.0076</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 132.3632/209.0076</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>(<span class="fl">28193.37</span>)<span class="sc">/</span>(<span class="fl">24.18021</span> <span class="sc">*</span> <span class="fl">8.643744</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 134.8916</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>deviation_x_y)<span class="sc">/</span><span class="dv">214</span>)<span class="sc">/</span>(<span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>life_expectancy)) <span class="sc">*</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>(<span class="fu">var</span>(example_df2<span class="sc">$</span>urbanization)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6303347</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(example_df2<span class="sc">$</span>urbanization, example_df2<span class="sc">$</span>life_expectancy,</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6303347</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(example_df2<span class="sc">$</span>life_expectancy, example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>estimate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      cor 
0.6303347 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(example_df2<span class="sc">$</span>life_expectancy, example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  example_df2$life_expectancy and example_df2$urbanization
t = 11.85, df = 213, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.5422663 0.7047029
sample estimates:
      cor 
0.6303347 </code></pre>
</div>
</div>
</section>
</section>
<section id="next-lecture" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Next Lecture</h1>
<section id="table-14-mean-for-x" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="table-14-mean-for-x"><span class="header-section-number">9.1</span> Table 14: Mean for X</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df[example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>))</span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(example_df<span class="sc">$</span>life_expectancy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.643744</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>((example_df2<span class="sc">$</span>deviation_y)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">214</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.643744</code></pre>
</div>
</div>
</section>
<section id="table-15-mean-for-x-and-y" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="table-15-mean-for-x-and-y"><span class="header-section-number">9.2</span> Table 15: Mean for X and Y</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df[example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>))</span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fl">8.643744</span><span class="sc">/</span><span class="fl">24.18021</span> <span class="sc">*</span> <span class="fl">0.6303347</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253269</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.2253269</span> <span class="sc">*</span> <span class="fl">51.33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11.56603</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fl">61.259</span> <span class="sc">-</span> (<span class="fl">0.2253269</span> <span class="sc">*</span> <span class="fl">51.33</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49.69297</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df2)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df2)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="table-16-original-table" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="table-16-original-table"><span class="header-section-number">9.3</span> Table 16: Original Table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df[example_df<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>))</span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-17-adding-b" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="table-17-adding-b"><span class="header-section-number">9.4</span> Table 17: Adding b</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-18-adding-a" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="table-18-adding-a"><span class="header-section-number">9.5</span> Table 18: Adding a</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-19-adding-y-hat" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="table-19-adding-y-hat"><span class="header-section-number">9.6</span> Table 19: Adding Y hat</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>b,</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" * "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" + "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>a, <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb105-19"><a href="#cb105-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb105-20"><a href="#cb105-20" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb105-21"><a href="#cb105-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb105-22"><a href="#cb105-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb105-23"><a href="#cb105-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-24"><a href="#cb105-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-25"><a href="#cb105-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb105-26"><a href="#cb105-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb105-27"><a href="#cb105-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb105-28"><a href="#cb105-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb105-29"><a href="#cb105-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb105-30"><a href="#cb105-30" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb105-31"><a href="#cb105-31" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-20-adding-y-hat---highlighting-x" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="table-20-adding-y-hat---highlighting-x"><span class="header-section-number">9.7</span> Table 20: Adding Y hat - Highlighting X</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>for_pres2[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres2, as.character)</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres2)</span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres2))</span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb106-27"><a href="#cb106-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb106-28"><a href="#cb106-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb106-29"><a href="#cb106-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb106-30"><a href="#cb106-30" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means1)</span>
<span id="cb106-31"><a href="#cb106-31" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>,</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>], <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0.225  *  18.612  +  49.693" "0.225  *  40.444  +  49.693"
[3] "0.225  *  52.609  +  49.693" "0.225  *  79.762  +  49.693"
[5] "..."                         "0.225  *  26.304  +  49.693"
[7] ""                            ""                           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(example_df2, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  Entity      life_expectancy urbanization     b     a y_hat                    
  &lt;chr&gt;                 &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                    
1 Afghanistan            45.4         18.6 0.225  49.7 0.225  *  18.612  +  49.…
2 Albania                68.3         40.4 0.225  49.7 0.225  *  40.444  +  49.…
3 Algeria                57.5         52.6 0.225  49.7 0.225  *  52.609  +  49.…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>b[<span class="dv">1</span>],</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" * "</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization[<span class="dv">1</span>],</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="st">" + "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>a[<span class="dv">1</span>],</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization      b       a
1 \\textcolor{red}{18.6118} 0.2253 49.6931
2                   40.4442 0.2253 49.6931
3                   52.6092 0.2253 49.6931
4                   79.7625 0.2253 49.6931
5                       ...    ...     ...
6                   26.3045 0.2253 49.6931
7                     51.33               
8                                         
                                      y_hat
1 0.225 * \\textcolor{red}{18.612} + 49.693
2               0.225  *  40.444  +  49.693
3               0.225  *  52.609  +  49.693
4               0.225  *  79.762  +  49.693
5                                       ...
6               0.225  *  26.304  +  49.693
7                                          
8                                          </code></pre>
</div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-21-adding-y-hat---highlighting-x-and-b" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="table-21-adding-y-hat---highlighting-x-and-b"><span class="header-section-number">9.8</span> Table 21: Adding Y hat - Highlighting X and b</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>for_pres2[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres2, as.character)</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres2)</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres2))</span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means1)</span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>,</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>], <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>b[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{blue}{"</span>, for_pres2<span class="sc">$</span>b[<span class="dv">1</span>],</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization                         b       a
1 \\textcolor{red}{18.6118} \\textcolor{blue}{0.2253} 49.6931
2                   40.4442                    0.2253 49.6931
3                   52.6092                    0.2253 49.6931
4                   79.7625                    0.2253 49.6931
5                       ...                       ...     ...
6                   26.3045                    0.2253 49.6931
7                     51.33                                  
8                                                            
                        y_hat
1 0.225  *  18.612  +  49.693
2 0.225  *  40.444  +  49.693
3 0.225  *  52.609  +  49.693
4 0.225  *  79.762  +  49.693
5                         ...
6 0.225  *  26.304  +  49.693
7                            
8                            </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{blue}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>b[<span class="dv">1</span>],</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="st">" * "</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization[<span class="dv">1</span>],</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="st">" + "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>a[<span class="dv">1</span>],</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization                         b       a
1 \\textcolor{red}{18.6118} \\textcolor{blue}{0.2253} 49.6931
2                   40.4442                    0.2253 49.6931
3                   52.6092                    0.2253 49.6931
4                   79.7625                    0.2253 49.6931
5                       ...                       ...     ...
6                   26.3045                    0.2253 49.6931
7                     51.33                                  
8                                                            
                                                         y_hat
1 \\textcolor{blue}{0.225} * \\textcolor{red}{18.612} + 49.693
2                                  0.225  *  40.444  +  49.693
3                                  0.225  *  52.609  +  49.693
4                                  0.225  *  79.762  +  49.693
5                                                          ...
6                                  0.225  *  26.304  +  49.693
7                                                             
8                                                             </code></pre>
</div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-22-adding-y-hat---highlighting-x-b-and-a" class="level2" data-number="9.9">
<h2 data-number="9.9" class="anchored" data-anchor-id="table-22-adding-y-hat---highlighting-x-b-and-a"><span class="header-section-number">9.9</span> Table 22: Adding Y hat - Highlighting X, b, and a</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>for_pres2[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres2, as.character)</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres2)</span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres2))</span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb118-29"><a href="#cb118-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb118-30"><a href="#cb118-30" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means1)</span>
<span id="cb118-31"><a href="#cb118-31" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>,</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    for_pres2<span class="sc">$</span>urbanization[<span class="dv">1</span>], <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>b[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{blue}{"</span>, for_pres2<span class="sc">$</span>b[<span class="dv">1</span>],</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>a[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{green}{"</span>, for_pres2<span class="sc">$</span>a[<span class="dv">1</span>],</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization                         b
1 \\textcolor{red}{18.6118} \\textcolor{blue}{0.2253}
2                   40.4442                    0.2253
3                   52.6092                    0.2253
4                   79.7625                    0.2253
5                       ...                       ...
6                   26.3045                    0.2253
7                     51.33                          
8                                                    
                            a                       y_hat
1 \\textcolor{green}{49.6931} 0.225  *  18.612  +  49.693
2                     49.6931 0.225  *  40.444  +  49.693
3                     49.6931 0.225  *  52.609  +  49.693
4                     49.6931 0.225  *  79.762  +  49.693
5                         ...                         ...
6                     49.6931 0.225  *  26.304  +  49.693
7                                                        
8                                                        </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{blue}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>b[<span class="dv">1</span>],</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="st">" * "</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization[<span class="dv">1</span>],</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="st">" + "</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{green}{"</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>a[<span class="dv">1</span>],</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization                         b
1 \\textcolor{red}{18.6118} \\textcolor{blue}{0.2253}
2                   40.4442                    0.2253
3                   52.6092                    0.2253
4                   79.7625                    0.2253
5                       ...                       ...
6                   26.3045                    0.2253
7                     51.33                          
8                                                    
                            a
1 \\textcolor{green}{49.6931}
2                     49.6931
3                     49.6931
4                     49.6931
5                         ...
6                     49.6931
7                            
8                            
                                                                             y_hat
1 \\textcolor{blue}{0.225} * \\textcolor{red}{18.612} + \\textcolor{green}{49.693}
2                                                      0.225  *  40.444  +  49.693
3                                                      0.225  *  52.609  +  49.693
4                                                      0.225  *  79.762  +  49.693
5                                                                              ...
6                                                      0.225  *  26.304  +  49.693
7                                                                                 
8                                                                                 </code></pre>
</div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-23-adding-y-hat---highlighting-x-column" class="level2" data-number="9.10">
<h2 data-number="9.10" class="anchored" data-anchor-id="table-23-adding-y-hat---highlighting-x-column"><span class="header-section-number">9.10</span> Table 23: Adding Y hat - Highlighting X column</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>for_pres2[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres2, as.character)</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres2)</span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres2))</span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb123-23"><a href="#cb123-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-24"><a href="#cb123-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-25"><a href="#cb123-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb123-26"><a href="#cb123-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb123-27"><a href="#cb123-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb123-28"><a href="#cb123-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb123-29"><a href="#cb123-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb123-30"><a href="#cb123-30" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means1)</span>
<span id="cb123-31"><a href="#cb123-31" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means2)</span>
<span id="cb123-32"><a href="#cb123-32" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy urbanization
1                            1    Afghanistan         45.3833      18.6118
2                            2        Albania         68.2861      40.4442
3                            3        Algeria         57.5301      52.6092
4                            4 American Samoa         68.6375      79.7625
5                          ...            ...             ...          ...
6                          215       Zimbabwe         54.2472      26.3045
7 \\textcolor{red}{$\\bar{X}$}                                       51.33
8 \\textcolor{red}{$\\bar{Y}$}                         61.259             
       b       a                       y_hat
1 0.2253 49.6931 0.225  *  18.612  +  49.693
2 0.2253 49.6931 0.225  *  40.444  +  49.693
3 0.2253 49.6931 0.225  *  52.609  +  49.693
4 0.2253 49.6931 0.225  *  79.762  +  49.693
5    ...     ...                         ...
6 0.2253 49.6931 0.225  *  26.304  +  49.693
7                                           
8                                           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres2$urbanization[c(1:6)]</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>urbanization[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{"</span>,</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    for_pres2<span class="sc">$</span>urbanization[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)], <span class="st">"}"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization      b       a                       y_hat
1 \\textcolor{red}{18.6118} 0.2253 49.6931 0.225  *  18.612  +  49.693
2 \\textcolor{red}{40.4442} 0.2253 49.6931 0.225  *  40.444  +  49.693
3 \\textcolor{red}{52.6092} 0.2253 49.6931 0.225  *  52.609  +  49.693
4 \\textcolor{red}{79.7625} 0.2253 49.6931 0.225  *  79.762  +  49.693
5     \\textcolor{red}{...}    ...     ...                         ...
6 \\textcolor{red}{26.3045} 0.2253 49.6931 0.225  *  26.304  +  49.693
7                     51.33                                           
8                                                                     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="ot">&lt;-</span> <span class="fu">paste</span>(for_pres2<span class="sc">$</span>b[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)],</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">" * "</span>, for_pres2<span class="sc">$</span>urbanization[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)], <span class="st">" + "</span>, for_pres2<span class="sc">$</span>a[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)],</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>for_pres2<span class="sc">$</span>y_hat[for_pres2<span class="sc">$</span>y_hat <span class="sc">==</span> <span class="st">"... * </span><span class="sc">\\</span><span class="st">textcolor{red}{...} + ..."</span>] <span class="ot">&lt;-</span> <span class="st">"..."</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy
1                            1    Afghanistan         45.3833
2                            2        Albania         68.2861
3                            3        Algeria         57.5301
4                            4 American Samoa         68.6375
5                          ...            ...             ...
6                          215       Zimbabwe         54.2472
7 \\textcolor{red}{$\\bar{X}$}                               
8 \\textcolor{red}{$\\bar{Y}$}                         61.259
               urbanization      b       a
1 \\textcolor{red}{18.6118} 0.2253 49.6931
2 \\textcolor{red}{40.4442} 0.2253 49.6931
3 \\textcolor{red}{52.6092} 0.2253 49.6931
4 \\textcolor{red}{79.7625} 0.2253 49.6931
5     \\textcolor{red}{...}    ...     ...
6 \\textcolor{red}{26.3045} 0.2253 49.6931
7                     51.33               
8                                         
                                         y_hat
1 0.2253 * \\textcolor{red}{18.6118} + 49.6931
2 0.2253 * \\textcolor{red}{40.4442} + 49.6931
3 0.2253 * \\textcolor{red}{52.6092} + 49.6931
4 0.2253 * \\textcolor{red}{79.7625} + 49.6931
5                                          ...
6 0.2253 * \\textcolor{red}{26.3045} + 49.6931
7                                             
8                                             </code></pre>
</div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:28 2023
</section>
<section id="table-24-adding-the-y-hat---doing-the-algebra" class="level2" data-number="9.11">
<h2 data-number="9.11" class="anchored" data-anchor-id="table-24-adding-the-y-hat---doing-the-algebra"><span class="header-section-number">9.11</span> Table 24: Adding the Y hat - Doing the Algebra</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 6
   Entity              life_expectancy urbanization     b     a y_hat
   &lt;chr&gt;                         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Afghanistan                    45.4         18.6 0.225  49.7  53.9
 2 Albania                        68.3         40.4 0.225  49.7  58.8
 3 Algeria                        57.5         52.6 0.225  49.7  61.5
 4 American Samoa                 68.6         79.8 0.225  49.7  67.7
 5 Andorra                        77.0         87.0 0.225  49.7  69.3
 6 Angola                         45.1         37.5 0.225  49.7  58.2
 7 Antigua and Barbuda            71.2         32.4 0.225  49.7  57.0
 8 Argentina                      65.4         85.3 0.225  49.7  68.9
 9 Armenia                        67.2         63.1 0.225  49.7  63.9
10 Aruba                          70.3         48.1 0.225  49.7  60.5
# … with 205 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Afghanistan"</span>, <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>,</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>for_pres2[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres2, as.character)</span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres2)</span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres2))</span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> for_pres2 <span class="sc">%&gt;%</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>)</span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means1)</span>
<span id="cb137-31"><a href="#cb137-31" aria-hidden="true" tabindex="-1"></a>for_pres2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres2, means2)</span>
<span id="cb137-32"><a href="#cb137-32" aria-hidden="true" tabindex="-1"></a>for_pres2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         index         Entity life_expectancy urbanization
1                            1    Afghanistan         45.3833      18.6118
2                            2        Albania         68.2861      40.4442
3                            3        Algeria         57.5301      52.6092
4                            4 American Samoa         68.6375      79.7625
5                          ...            ...             ...          ...
6                          215       Zimbabwe         54.2472      26.3045
7 \\textcolor{red}{$\\bar{X}$}                                       51.33
8 \\textcolor{red}{$\\bar{Y}$}                         61.259             
       b       a   y_hat
1 0.2253 49.6931 53.8868
2 0.2253 49.6931 58.8062
3 0.2253 49.6931 61.5474
4 0.2253 49.6931 67.6657
5    ...     ...     ...
6 0.2253 49.6931 55.6202
7                       
8                       </code></pre>
</div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:29 2023
</section>
<section id="picture-regressions" class="level2" data-number="9.12">
<h2 data-number="9.12" class="anchored" data-anchor-id="picture-regressions"><span class="header-section-number">9.12</span> Picture regressions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$urbanization</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df2)</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df2)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="focus-on-the-us-uk-spain-itlay-and-china" class="level2" data-number="9.13">
<h2 data-number="9.13" class="anchored" data-anchor-id="focus-on-the-us-uk-spain-itlay-and-china"><span class="header-section-number">9.13</span> Focus on the US, UK, Spain, Itlay, and China</h2>
<p>Set wd Figure 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>figure1<span class="ot">&lt;-</span><span class="fu">ggplot</span>(example_df2, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy)) <span class="sc">+</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_smooth(method = "lm")+</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure1, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure1.jpg"</span>, </span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>figure2<span class="ot">&lt;-</span><span class="fu">ggplot</span>(example_df2, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy)) <span class="sc">+</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure2, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure2.jpg"</span>, </span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>figure3<span class="ot">&lt;-</span><span class="fu">ggplot</span>(example_df2, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy)) <span class="sc">+</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> a, <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> b <span class="sc">*</span> <span class="fu">max</span>(urbanization) <span class="sc">+</span> a), <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Entity),</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure3, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure3.jpg"</span>, </span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving only a few countries</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>,</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Italy"</span>, <span class="st">"Spain"</span>, <span class="st">"China"</span>)</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>sample_few_countries <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>figure4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> a, <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> b <span class="sc">*</span> <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>        a), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Entity),</span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>,</span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure4, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure4.jpg"</span>,</span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries<span class="sc">$</span>label <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"life_expectacy: "</span>,</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(<span class="fu">round</span>(sample_few_countries<span class="sc">$</span>life_expectancy,</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>)), <span class="st">"</span><span class="sc">\n</span><span class="st"> urbanization: "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(sample_few_countries<span class="sc">$</span>urbanization,</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>figure5<span class="ot">&lt;-</span><span class="fu">ggplot</span>(sample_few_countries, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy)) <span class="sc">+</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> a, <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> b <span class="sc">*</span> <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> a), <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Entity),</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>, </span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">x =</span> <span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb147-17"><a href="#cb147-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb147-18"><a href="#cb147-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb147-19"><a href="#cb147-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb147-20"><a href="#cb147-20" aria-hidden="true" tabindex="-1"></a>figure5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-96-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure5, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure5.jpg"</span>, </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>figure6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> a, <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> b <span class="sc">*</span> <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>        a), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>,</span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure6, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure6.jpg"</span>,</span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating predictions</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df2)</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df2)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries<span class="sc">$</span>y_predicted_life_expectancy_res <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>    sample_few_countries<span class="sc">$</span>urbanization <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving the predicted values as a separate</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>sample_few_countries_predicted <span class="ot">&lt;-</span> <span class="fu">subset</span>(sample_few_countries,</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">select =</span> <span class="fu">c</span>(Entity, y_predicted_life_expectancy_res,</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>        urbanization, label))</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>sample_few_countries_predicted<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>sample_few_countries_predicted<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="st">"predicted"</span></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sample_few_countries_predicted)[<span class="fu">names</span>(sample_few_countries_predicted) <span class="sc">==</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"y_predicted_life_expectancy_res"</span>] <span class="ot">&lt;-</span> <span class="st">"life_expectancy"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing the predicted values as a separate</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe from the original df</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>sample_few_countries <span class="ot">&lt;-</span> <span class="fu">subset</span>(sample_few_countries,</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(y_predicted_life_expectancy_res, a,</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>        b, y_hat))</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the other vars in the original dataframe</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="co"># - relevant for the rowbind</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>sample_few_countries<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a>sample_few_countries<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="st">"observed"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  Entity         life_expectancy urbanization label                        value
  &lt;chr&gt;                    &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;                        &lt;chr&gt;
1 China                     61.9         31.3 "life_expectacy:  61.88 \n … obse…
2 Italy                     59.7         66.4 "life_expectacy:  59.75 \n … obse…
3 Spain                     64.4         72.9 "life_expectacy:  64.44 \n … obse…
4 United Kingdom            54.1         79.2 "life_expectacy:  54.08 \n … obse…
5 United States             67.1         76.5 "life_expectacy:  67.13 \n … obse…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries_predicted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  Entity         life_expectancy urbanization label                        value
  &lt;chr&gt;                    &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;                        &lt;chr&gt;
1 China                     56.7         31.3 "life_expectacy:  61.88 \n … pred…
2 Italy                     64.7         66.4 "life_expectacy:  59.75 \n … pred…
3 Spain                     66.1         72.9 "life_expectacy:  64.44 \n … pred…
4 United Kingdom            67.5         79.2 "life_expectacy:  54.08 \n … pred…
5 United States             66.9         76.5 "life_expectacy:  67.13 \n … pred…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries_combined <span class="ot">&lt;-</span> <span class="fu">rbind</span>(sample_few_countries,</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>    sample_few_countries_predicted)</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sample_few_countries_combined$life_expectancy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>figure7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy, <span class="at">color =</span> value, <span class="at">shape =</span> value)) <span class="sc">+</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>],</span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]),</span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>,</span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_blank</span>(), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>figure7 <span class="ot">&lt;-</span> <span class="fu">reposition_legend</span>(figure7, <span class="st">"top right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure7, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure7.jpg"</span>,</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s keep only the United States, United Kingdom, Spain, Italy, and China</p>
</section>
<section id="table-25-adding-y-hat---china-italy-spain-uk-us" class="level2" data-number="9.14">
<h2 data-number="9.14" class="anchored" data-anchor-id="table-25-adding-y-hat---china-italy-spain-uk-us"><span class="header-section-number">9.14</span> Table 25: Adding Y hat - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>b,</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" * "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" + "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>a, <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb173-12"><a href="#cb173-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-13"><a href="#cb173-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Index</span></span>
<span id="cb173-14"><a href="#cb173-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb173-15"><a href="#cb173-15" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb173-16"><a href="#cb173-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb173-17"><a href="#cb173-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-18"><a href="#cb173-18" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb173-19"><a href="#cb173-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb173-20"><a href="#cb173-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb173-21"><a href="#cb173-21" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb173-22"><a href="#cb173-22" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb173-23"><a href="#cb173-23" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb173-24"><a href="#cb173-24" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:33 2023
</section>
<section id="table-26-adding-y-hat-calculation---china-italy-spain-uk-us" class="level2" data-number="9.15">
<h2 data-number="9.15" class="anchored" data-anchor-id="table-26-adding-y-hat-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.15</span> Table 26: Adding Y hat Calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb183-17"><a href="#cb183-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb183-18"><a href="#cb183-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-19"><a href="#cb183-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb183-20"><a href="#cb183-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb183-21"><a href="#cb183-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb183-22"><a href="#cb183-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb183-23"><a href="#cb183-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb183-24"><a href="#cb183-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb183-25"><a href="#cb183-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>)</span>
<span id="cb183-26"><a href="#cb183-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb183-27"><a href="#cb183-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb183-28"><a href="#cb183-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb183-29"><a href="#cb183-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:33 2023
</section>
<section id="figure-8" class="level2" data-number="9.16">
<h2 data-number="9.16" class="anchored" data-anchor-id="figure-8"><span class="header-section-number">9.16</span> Figure 8</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github('nicolash2/ggbrace')</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbrace)</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>x1_ch <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>life_expectancy[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"observed"</span>]</span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>y1_ch <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>urbanization[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"observed"</span>]</span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a>x2_ch <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>life_expectancy[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"predicted"</span>]</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-16"><a href="#cb184-16" aria-hidden="true" tabindex="-1"></a>y2_ch <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>urbanization[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-17"><a href="#cb184-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-18"><a href="#cb184-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"predicted"</span>]</span>
<span id="cb184-19"><a href="#cb184-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-20"><a href="#cb184-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-21"><a href="#cb184-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-22"><a href="#cb184-22" aria-hidden="true" tabindex="-1"></a>x1_uk <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>life_expectancy[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-23"><a href="#cb184-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-24"><a href="#cb184-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"observed"</span>]</span>
<span id="cb184-25"><a href="#cb184-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-26"><a href="#cb184-26" aria-hidden="true" tabindex="-1"></a>y1_uk <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>urbanization[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-27"><a href="#cb184-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-28"><a href="#cb184-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"observed"</span>]</span>
<span id="cb184-29"><a href="#cb184-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-30"><a href="#cb184-30" aria-hidden="true" tabindex="-1"></a>x2_uk <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>life_expectancy[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-31"><a href="#cb184-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-32"><a href="#cb184-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"predicted"</span>]</span>
<span id="cb184-33"><a href="#cb184-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-34"><a href="#cb184-34" aria-hidden="true" tabindex="-1"></a>y2_uk <span class="ot">&lt;-</span> sample_few_countries_combined<span class="sc">$</span>urbanization[sample_few_countries_combined<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb184-35"><a href="#cb184-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span> <span class="sc">&amp;</span> sample_few_countries_combined<span class="sc">$</span>value <span class="sc">==</span></span>
<span id="cb184-36"><a href="#cb184-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"predicted"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>figure8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy, <span class="at">color =</span> value, <span class="at">shape =</span> value)) <span class="sc">+</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_ch, y2_ch), <span class="fu">c</span>(x1_ch, x2_ch),</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"residual"</span>), <span class="at">inherit.data =</span> F, <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>],</span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]),</span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>,</span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_blank</span>(), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a>figure8 <span class="ot">&lt;-</span> <span class="fu">reposition_legend</span>(figure8, <span class="st">"top right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-114-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure8, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure8.jpg"</span>,</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>figure9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy, <span class="at">color =</span> value, <span class="at">shape =</span> value)) <span class="sc">+</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_ch, y2_ch), <span class="fu">c</span>(x1_ch, x2_ch),</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"residual"</span>), <span class="at">inherit.data =</span> F, <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span> <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_uk, y2_uk),</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(x1_uk, x2_uk), <span class="at">label =</span> <span class="st">"residual"</span>), <span class="at">inherit.data =</span> F,</span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">labelsize =</span> <span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>], <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]),</span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>,</span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb187-17"><a href="#cb187-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb187-18"><a href="#cb187-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_blank</span>(), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb187-19"><a href="#cb187-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-20"><a href="#cb187-20" aria-hidden="true" tabindex="-1"></a>figure9 <span class="ot">&lt;-</span> <span class="fu">reposition_legend</span>(figure9, <span class="st">"top right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-115-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure9, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure9.jpg"</span>,</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>figure10<span class="ot">&lt;-</span><span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy, </span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">color =</span> value, <span class="at">shape=</span>value)) <span class="sc">+</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">'black'</span>, <span class="st">"red"</span>))<span class="sc">+</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_ch,y2_ch), <span class="fu">c</span>(x1_ch, x2_ch), <span class="at">label=</span><span class="fu">as.character</span>(<span class="fu">round</span>(x1_ch<span class="sc">-</span>x2_ch,<span class="dv">2</span>))), </span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">inherit.data=</span>F, <span class="at">labelsize=</span><span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>)<span class="sc">+</span></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_uk,y2_uk), <span class="fu">c</span>(x1_uk, x2_uk), <span class="at">label=</span><span class="fu">as.character</span>(<span class="fu">round</span>(x1_uk<span class="sc">-</span>x2_uk,<span class="dv">2</span>))), </span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">inherit.data=</span>F, <span class="at">labelsize=</span><span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>)<span class="sc">+</span></span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>], <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span> <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]), <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_segment(aes(x = 0, y = population_life_expectancy_mean, xend = 100, </span></span>
<span id="cb189-12"><a href="#cb189-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                 yend = population_life_expectancy_mean), color = "blue", linetype=2)+</span></span>
<span id="cb189-13"><a href="#cb189-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb189-14"><a href="#cb189-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb189-15"><a href="#cb189-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb189-16"><a href="#cb189-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb189-17"><a href="#cb189-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb189-18"><a href="#cb189-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb189-19"><a href="#cb189-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb189-20"><a href="#cb189-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb189-21"><a href="#cb189-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb189-22"><a href="#cb189-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">'white'</span>),</span>
<span id="cb189-23"><a href="#cb189-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb189-24"><a href="#cb189-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span>
<span id="cb189-25"><a href="#cb189-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-26"><a href="#cb189-26" aria-hidden="true" tabindex="-1"></a>figure10<span class="ot">&lt;-</span><span class="fu">reposition_legend</span>(figure10, <span class="st">'top right'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-116-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure10, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure10.jpg"</span>, </span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="table-27-adding-residual---china-italy-spain-uk-us" class="level2" data-number="9.17">
<h2 data-number="9.17" class="anchored" data-anchor-id="table-27-adding-residual---china-italy-spain-uk-us"><span class="header-section-number">9.17</span> Table 27: Adding Residual - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy,</span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" - "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>y_hat,</span>
<span id="cb197-9"><a href="#cb197-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)))</span>
<span id="cb197-10"><a href="#cb197-10" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 7
   Entity              life_expectancy urbanization     b     a y_hat y_residual
   &lt;chr&gt;                         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     
 1 Afghanistan                    45.4         18.6 0.225  49.7  53.9 45.383  -…
 2 Albania                        68.3         40.4 0.225  49.7  58.8 68.286  -…
 3 Algeria                        57.5         52.6 0.225  49.7  61.5 57.53  - …
 4 American Samoa                 68.6         79.8 0.225  49.7  67.7 68.638  -…
 5 Andorra                        77.0         87.0 0.225  49.7  69.3 77.049  -…
 6 Angola                         45.1         37.5 0.225  49.7  58.2 45.085  -…
 7 Antigua and Barbuda            71.2         32.4 0.225  49.7  57.0 71.21  - …
 8 Argentina                      65.4         85.3 0.225  49.7  68.9 65.408  -…
 9 Armenia                        67.2         63.1 0.225  49.7  63.9 67.157  -…
10 Aruba                          70.3         48.1 0.225  49.7  60.5 70.26  - …
# … with 205 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb201-14"><a href="#cb201-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb201-15"><a href="#cb201-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb201-16"><a href="#cb201-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb201-17"><a href="#cb201-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb201-18"><a href="#cb201-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-19"><a href="#cb201-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb201-20"><a href="#cb201-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb201-21"><a href="#cb201-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb201-22"><a href="#cb201-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb201-23"><a href="#cb201-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb201-24"><a href="#cb201-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb201-25"><a href="#cb201-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb201-26"><a href="#cb201-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb201-27"><a href="#cb201-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb201-28"><a href="#cb201-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb201-29"><a href="#cb201-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:34 2023
</section>
<section id="table-28-adding-residual-calculation---china-italy-spain-uk-us" class="level2" data-number="9.18">
<h2 data-number="9.18" class="anchored" data-anchor-id="table-28-adding-residual-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.18</span> Table 28: Adding Residual Calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb208-6"><a href="#cb208-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb208-7"><a href="#cb208-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb208-8"><a href="#cb208-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat</span>
<span id="cb208-9"><a href="#cb208-9" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 7
   Entity              life_expectancy urbanization     b     a y_hat y_residual
   &lt;chr&gt;                         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 Afghanistan                    45.4         18.6 0.225  49.7  53.9     -8.50 
 2 Albania                        68.3         40.4 0.225  49.7  58.8      9.48 
 3 Algeria                        57.5         52.6 0.225  49.7  61.5     -4.02 
 4 American Samoa                 68.6         79.8 0.225  49.7  67.7      0.972
 5 Andorra                        77.0         87.0 0.225  49.7  69.3      7.74 
 6 Angola                         45.1         37.5 0.225  49.7  58.2    -13.1  
 7 Antigua and Barbuda            71.2         32.4 0.225  49.7  57.0     14.2  
 8 Argentina                      65.4         85.3 0.225  49.7  68.9     -3.50 
 9 Armenia                        67.2         63.1 0.225  49.7  63.9      3.24 
10 Aruba                          70.3         48.1 0.225  49.7  60.5      9.74 
# … with 205 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb212-12"><a href="#cb212-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb212-15"><a href="#cb212-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb212-16"><a href="#cb212-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb212-17"><a href="#cb212-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb212-18"><a href="#cb212-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-19"><a href="#cb212-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb212-20"><a href="#cb212-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb212-21"><a href="#cb212-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb212-22"><a href="#cb212-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb212-23"><a href="#cb212-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb212-24"><a href="#cb212-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb212-25"><a href="#cb212-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb212-26"><a href="#cb212-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb212-27"><a href="#cb212-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb212-28"><a href="#cb212-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb212-29"><a href="#cb212-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:34 2023
</section>
<section id="table-29-adding-mean---china-italy-spain-uk-us" class="level2" data-number="9.19">
<h2 data-number="9.19" class="anchored" data-anchor-id="table-29-adding-mean---china-italy-spain-uk-us"><span class="header-section-number">9.19</span> Table 29: Adding Mean - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat</span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_bar <span class="ot">&lt;-</span> <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy)</span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urbaniz…¹     b     a y_hat y_res…² y_bar
   &lt;chr&gt;                         &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 Afghanistan                    45.4      18.6 0.225  49.7  53.9  -8.50   61.3
 2 Albania                        68.3      40.4 0.225  49.7  58.8   9.48   61.3
 3 Algeria                        57.5      52.6 0.225  49.7  61.5  -4.02   61.3
 4 American Samoa                 68.6      79.8 0.225  49.7  67.7   0.972  61.3
 5 Andorra                        77.0      87.0 0.225  49.7  69.3   7.74   61.3
 6 Angola                         45.1      37.5 0.225  49.7  58.2 -13.1    61.3
 7 Antigua and Barbuda            71.2      32.4 0.225  49.7  57.0  14.2    61.3
 8 Argentina                      65.4      85.3 0.225  49.7  68.9  -3.50   61.3
 9 Armenia                        67.2      63.1 0.225  49.7  63.9   3.24   61.3
10 Aruba                          70.3      48.1 0.225  49.7  60.5   9.74   61.3
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb223-23"><a href="#cb223-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb223-24"><a href="#cb223-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb223-25"><a href="#cb223-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb223-26"><a href="#cb223-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb223-27"><a href="#cb223-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb223-28"><a href="#cb223-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb223-29"><a href="#cb223-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:34 2023
</section>
<section id="figure11" class="level2" data-number="9.20">
<h2 data-number="9.20" class="anchored" data-anchor-id="figure11"><span class="header-section-number">9.20</span> Figure11</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>sample_few_countries_resid <span class="ot">&lt;-</span> <span class="fu">subset</span>(sample_few_countries,</span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">select =</span> <span class="fu">c</span>(Entity, life_expectancy, urbanization))</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>sample_few_countries_resid<span class="sc">$</span>life_expectancy_prediced <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>    sample_few_countries<span class="sc">$</span>urbanization <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>sample_few_countries_resid<span class="sc">$</span>life_expectancy_resid <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>    sample_few_countries_resid<span class="sc">$</span>life_expectancy_prediced</span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a>sample_few_countries_resid<span class="sc">$</span>life_expectancy_resid_base <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a>    population_life_expectancy_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>x1_uk <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>life_expectancy[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>]</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>y1_uk <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>urbanization[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>]</span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>x2_uk <span class="ot">&lt;-</span> population_life_expectancy_mean</span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a>y2_uk <span class="ot">&lt;-</span> y1_uk</span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a>x1_ch <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>life_expectancy[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span>]</span>
<span id="cb225-13"><a href="#cb225-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-14"><a href="#cb225-14" aria-hidden="true" tabindex="-1"></a>y1_ch <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>urbanization[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-15"><a href="#cb225-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"China"</span>]</span>
<span id="cb225-16"><a href="#cb225-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-17"><a href="#cb225-17" aria-hidden="true" tabindex="-1"></a>x2_ch <span class="ot">&lt;-</span> population_life_expectancy_mean</span>
<span id="cb225-18"><a href="#cb225-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-19"><a href="#cb225-19" aria-hidden="true" tabindex="-1"></a>y2_ch <span class="ot">&lt;-</span> y1_ch</span>
<span id="cb225-20"><a href="#cb225-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-21"><a href="#cb225-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-22"><a href="#cb225-22" aria-hidden="true" tabindex="-1"></a>x1_sp <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>life_expectancy[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-23"><a href="#cb225-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Spain"</span>]</span>
<span id="cb225-24"><a href="#cb225-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-25"><a href="#cb225-25" aria-hidden="true" tabindex="-1"></a>y1_sp <span class="ot">&lt;-</span> sample_few_countries_resid<span class="sc">$</span>urbanization[sample_few_countries_resid<span class="sc">$</span>Entity <span class="sc">==</span></span>
<span id="cb225-26"><a href="#cb225-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Spain"</span>]</span>
<span id="cb225-27"><a href="#cb225-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-28"><a href="#cb225-28" aria-hidden="true" tabindex="-1"></a>x2_sp <span class="ot">&lt;-</span> population_life_expectancy_mean</span>
<span id="cb225-29"><a href="#cb225-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-30"><a href="#cb225-30" aria-hidden="true" tabindex="-1"></a>y2_sp <span class="ot">&lt;-</span> y1_sp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>figure11<span class="ot">&lt;-</span><span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x=</span>urbanization, <span class="at">y=</span>life_expectancy, </span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">color =</span> value, <span class="at">shape=</span>value)) <span class="sc">+</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">'black'</span>, <span class="st">"red"</span>))<span class="sc">+</span></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>], <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span> <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]), </span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> population_life_expectancy_mean, <span class="at">xend =</span> <span class="dv">100</span>, </span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">yend =</span> population_life_expectancy_mean), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">linetype=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_brace(aes(c(y1_uk,y2_uk), c(x1_uk, x2_uk), label=as.character(round(x1_uk-x2_uk,2))), </span></span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           inherit.data=F, labelsize=5, rotate = 90)+</span></span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_brace(aes(c(y1_ch,y2_ch), c(x1_ch, x2_ch), label=as.character(round(x1_ch-x2_ch,2))), </span></span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           inherit.data=F, labelsize=5, rotate = 90)+</span></span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_brace(aes(c(y1_sp,y2_sp), c(x1_sp, x2_sp), label=as.character(round(x1_sp-x2_sp,2))), </span></span>
<span id="cb226-15"><a href="#cb226-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           inherit.data=F, labelsize=5, rotate = 90)+</span></span>
<span id="cb226-16"><a href="#cb226-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-17"><a href="#cb226-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb226-18"><a href="#cb226-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb226-19"><a href="#cb226-19" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb226-20"><a href="#cb226-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>), </span>
<span id="cb226-21"><a href="#cb226-21" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb226-22"><a href="#cb226-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb226-23"><a href="#cb226-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb226-24"><a href="#cb226-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb226-25"><a href="#cb226-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb226-26"><a href="#cb226-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">'white'</span>),</span>
<span id="cb226-27"><a href="#cb226-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb226-28"><a href="#cb226-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span>
<span id="cb226-29"><a href="#cb226-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-30"><a href="#cb226-30" aria-hidden="true" tabindex="-1"></a>figure11<span class="ot">&lt;-</span><span class="fu">reposition_legend</span>(figure11, <span class="st">'top right'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-131-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure11, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure11.jpg"</span>, </span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, </span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>figure12 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sample_few_countries_combined, <span class="fu">aes</span>(<span class="at">x =</span> urbanization,</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> life_expectancy, <span class="at">color =</span> value, <span class="at">shape =</span> value)) <span class="sc">+</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>],</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]] <span class="sc">*</span></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">max</span>(final_new<span class="sc">$</span>urbanization) <span class="sc">+</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]),</span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> population_life_expectancy_mean,</span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">xend =</span> <span class="dv">100</span>, <span class="at">yend =</span> population_life_expectancy_mean),</span>
<span id="cb228-10"><a href="#cb228-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_uk,</span>
<span id="cb228-11"><a href="#cb228-11" aria-hidden="true" tabindex="-1"></a>    y2_uk), <span class="fu">c</span>(x1_uk, x2_uk), <span class="at">label =</span> <span class="fu">as.character</span>(<span class="fu">round</span>(x1_uk <span class="sc">-</span></span>
<span id="cb228-12"><a href="#cb228-12" aria-hidden="true" tabindex="-1"></a>    x2_uk, <span class="dv">2</span>))), <span class="at">inherit.data =</span> F, <span class="at">labelsize =</span> <span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span></span>
<span id="cb228-13"><a href="#cb228-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_ch, y2_ch), <span class="fu">c</span>(x1_ch, x2_ch),</span>
<span id="cb228-14"><a href="#cb228-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">as.character</span>(<span class="fu">round</span>(x1_ch <span class="sc">-</span> x2_ch, <span class="dv">2</span>))),</span>
<span id="cb228-15"><a href="#cb228-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">inherit.data =</span> F, <span class="at">labelsize =</span> <span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span></span>
<span id="cb228-16"><a href="#cb228-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_brace</span>(<span class="fu">aes</span>(<span class="fu">c</span>(y1_sp, y2_sp), <span class="fu">c</span>(x1_sp, x2_sp),</span>
<span id="cb228-17"><a href="#cb228-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">as.character</span>(<span class="fu">round</span>(x1_sp <span class="sc">-</span> x2_sp, <span class="dv">2</span>))),</span>
<span id="cb228-18"><a href="#cb228-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">inherit.data =</span> F, <span class="at">labelsize =</span> <span class="dv">5</span>, <span class="at">rotate =</span> <span class="dv">90</span>) <span class="sc">+</span></span>
<span id="cb228-19"><a href="#cb228-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-20"><a href="#cb228-20" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"urbanization"</span>,</span>
<span id="cb228-21"><a href="#cb228-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb228-22"><a href="#cb228-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"life_expectancy"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,</span>
<span id="cb228-23"><a href="#cb228-23" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>, <span class="dv">20</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb228-24"><a href="#cb228-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb228-25"><a href="#cb228-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb228-26"><a href="#cb228-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_blank</span>(), <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb228-27"><a href="#cb228-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-28"><a href="#cb228-28" aria-hidden="true" tabindex="-1"></a>figure12 <span class="ot">&lt;-</span> <span class="fu">reposition_legend</span>(figure12, <span class="st">"top right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="script_lecture6-7_files/figure-html/unnamed-chunk-132-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(figure12, <span class="at">file =</span> <span class="st">"/Users/bgpopescu/Dropbox/john_cabot/teaching/stats/lecture9/graphs/figure12.jpg"</span>,</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">20</span>, <span class="at">width =</span> <span class="dv">20</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="table-30-subtracting-mean---china-italy-spain-uk-us" class="level2" data-number="9.21">
<h2 data-number="9.21" class="anchored" data-anchor-id="table-30-subtracting-mean---china-italy-spain-uk-us"><span class="header-section-number">9.21</span> Table 30: Subtracting Mean - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat</span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>residual_baseline <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy,</span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">" - "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(<span class="fu">mean</span>(example_df2<span class="sc">$</span>y_hat),</span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)))</span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² resid…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  -8.50  45.383…
 2 Albania                        68.3    40.4 0.225  49.7  58.8   9.48  68.286…
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  -4.02  57.53 …
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.972 68.638…
 5 Andorra                        77.0    87.0 0.225  49.7  69.3   7.74  77.049…
 6 Angola                         45.1    37.5 0.225  49.7  58.2 -13.1   45.085…
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0  14.2   71.21 …
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  -3.50  65.408…
 9 Armenia                        67.2    63.1 0.225  49.7  63.9   3.24  67.157…
10 Aruba                          70.3    48.1 0.225  49.7  60.5   9.74  70.26 …
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual, ³​residual_baseline</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb240-8"><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb240-9"><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-10"><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb240-11"><a href="#cb240-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb240-12"><a href="#cb240-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-13"><a href="#cb240-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb240-14"><a href="#cb240-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb240-15"><a href="#cb240-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb240-16"><a href="#cb240-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb240-17"><a href="#cb240-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb240-18"><a href="#cb240-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-19"><a href="#cb240-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb240-20"><a href="#cb240-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb240-21"><a href="#cb240-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb240-22"><a href="#cb240-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb240-23"><a href="#cb240-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb240-24"><a href="#cb240-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb240-25"><a href="#cb240-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb240-26"><a href="#cb240-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb240-27"><a href="#cb240-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb240-28"><a href="#cb240-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb240-29"><a href="#cb240-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
</section>
<section id="table-31-subtracting-mean-calculation---china-italy-spain-uk-us" class="level2" data-number="9.22">
<h2 data-number="9.22" class="anchored" data-anchor-id="table-31-subtracting-mean-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.22</span> Table 31: Subtracting Mean Calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat</span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>residual_baseline <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy)</span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² resid…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  -8.50   -15.9 
 2 Albania                        68.3    40.4 0.225  49.7  58.8   9.48     7.03
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  -4.02    -3.73
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.972    7.38
 5 Andorra                        77.0    87.0 0.225  49.7  69.3   7.74    15.8 
 6 Angola                         45.1    37.5 0.225  49.7  58.2 -13.1    -16.2 
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0  14.2      9.95
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  -3.50     4.15
 9 Armenia                        67.2    63.1 0.225  49.7  63.9   3.24     5.90
10 Aruba                          70.3    48.1 0.225  49.7  60.5   9.74     9.00
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual, ³​residual_baseline</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  41  96 182 204 205</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>)</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb251-9"><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb251-11"><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-13"><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb251-14"><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a><span class="co"># list_to_be_added&lt;-rep('...', ncol(for_pres))</span></span>
<span id="cb251-15"><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a><span class="co"># for_pres&lt;-for_pres%&gt;% add_row(!!!</span></span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a><span class="co"># setNames(list_to_be_added, names(.)), .before =</span></span>
<span id="cb251-17"><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)</span></span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-19"><a href="#cb251-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb251-20"><a href="#cb251-20" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb251-21"><a href="#cb251-21" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb251-22"><a href="#cb251-22" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb251-23"><a href="#cb251-23" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb251-24"><a href="#cb251-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb251-25"><a href="#cb251-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb251-26"><a href="#cb251-26" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb251-27"><a href="#cb251-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb251-28"><a href="#cb251-28" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb251-29"><a href="#cb251-29" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
</section>
<section id="table-32-squaring-residuals-and-mean-substraction---china-italy-spain-uk-us" class="level2" data-number="9.23">
<h2 data-number="9.23" class="anchored" data-anchor-id="table-32-squaring-residuals-and-mean-substraction---china-italy-spain-uk-us"><span class="header-section-number">9.23</span> Table 32: Squaring Residuals and Mean Substraction - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat, <span class="dv">3</span>)), <span class="st">"$^2$"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>residual_baseline_sq <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy), <span class="dv">3</span>)), <span class="st">"$^2$"</span>,</span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb258-12"><a href="#cb258-12" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² resid…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9 -8.503… -15.87…
 2 Albania                        68.3    40.4 0.225  49.7  58.8 9.48$^… 7.027$…
 3 Algeria                        57.5    52.6 0.225  49.7  61.5 -4.017… -3.729…
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7 0.972$… 7.378$…
 5 Andorra                        77.0    87.0 0.225  49.7  69.3 7.742$… 15.79$…
 6 Angola                         45.1    37.5 0.225  49.7  58.2 -13.06… -16.17…
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 14.227… 9.951$…
 8 Argentina                      65.4    85.3 0.225  49.7  68.9 -3.501… 4.149$…
 9 Armenia                        67.2    63.1 0.225  49.7  63.9 3.243$… 5.898$…
10 Aruba                          70.3    48.1 0.225  49.7  60.5 9.738$… 9.001$…
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​residual_baseline_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb260-6"><a href="#cb260-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb260-7"><a href="#cb260-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb260-8"><a href="#cb260-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb260-9"><a href="#cb260-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-10"><a href="#cb260-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb260-11"><a href="#cb260-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb260-12"><a href="#cb260-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb263-9"><a href="#cb263-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb263-10"><a href="#cb263-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-11"><a href="#cb263-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb263-12"><a href="#cb263-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb263-13"><a href="#cb263-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb263-14"><a href="#cb263-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb263-15"><a href="#cb263-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-16"><a href="#cb263-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb263-17"><a href="#cb263-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb263-18"><a href="#cb263-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb263-19"><a href="#cb263-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-20"><a href="#cb263-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-21"><a href="#cb263-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-22"><a href="#cb263-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-23"><a href="#cb263-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-24"><a href="#cb263-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-25"><a href="#cb263-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-26"><a href="#cb263-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-27"><a href="#cb263-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-28"><a href="#cb263-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-29"><a href="#cb263-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb263-30"><a href="#cb263-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb263-31"><a href="#cb263-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-32"><a href="#cb263-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq residual_baseline_sq
1     -8.503$^2$          -15.876$^2$
2       9.48$^2$            7.027$^2$
3     -4.017$^2$           -3.729$^2$
4      0.972$^2$            7.378$^2$
5            ...                  ...
6      5.132$^2$             0.62$^2$
7            ...                  ...
8     -4.905$^2$           -1.509$^2$
9            ...                  ...
10    -1.677$^2$             3.18$^2$
11           ...                  ...
12   -13.455$^2$           -7.184$^2$
13           ...                  ...
14      0.21$^2$            5.875$^2$
15           ...                  ...
16    -1.373$^2$           -7.012$^2$</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
</section>
<section id="table-33-squaring-residuals-and-mean-substraction-calculation---china-italy-spain-uk-us" class="level2" data-number="9.24">
<h2 data-number="9.24" class="anchored" data-anchor-id="table-33-squaring-residuals-and-mean-substraction-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.24</span> Table 33: Squaring Residuals and Mean Substraction Calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb272-7"><a href="#cb272-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb272-8"><a href="#cb272-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb272-9"><a href="#cb272-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>residual_baseline_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb272-10"><a href="#cb272-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb272-11"><a href="#cb272-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² resid…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3     252. 
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9      49.4
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1      13.9
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944    54.4
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9     249. 
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.      262. 
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.       99.0
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3      17.2
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5      34.8
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8      81.0
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​residual_baseline_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb274-7"><a href="#cb274-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb274-8"><a href="#cb274-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb274-9"><a href="#cb274-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-10"><a href="#cb274-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb274-11"><a href="#cb274-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb274-12"><a href="#cb274-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb276-7"><a href="#cb276-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-8"><a href="#cb276-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb276-9"><a href="#cb276-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb276-10"><a href="#cb276-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-11"><a href="#cb276-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb276-12"><a href="#cb276-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb276-13"><a href="#cb276-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb276-14"><a href="#cb276-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb277-7"><a href="#cb277-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-8"><a href="#cb277-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb277-9"><a href="#cb277-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb277-10"><a href="#cb277-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-11"><a href="#cb277-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb277-12"><a href="#cb277-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb277-13"><a href="#cb277-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb277-14"><a href="#cb277-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb277-15"><a href="#cb277-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-16"><a href="#cb277-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb277-17"><a href="#cb277-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb277-18"><a href="#cb277-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb277-19"><a href="#cb277-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-20"><a href="#cb277-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-21"><a href="#cb277-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-22"><a href="#cb277-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-23"><a href="#cb277-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-24"><a href="#cb277-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-25"><a href="#cb277-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-26"><a href="#cb277-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-27"><a href="#cb277-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-28"><a href="#cb277-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-29"><a href="#cb277-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb277-30"><a href="#cb277-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb277-31"><a href="#cb277-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-32"><a href="#cb277-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq residual_baseline_sq
1        72.3092              252.038
2        89.8679              49.3797
3        16.1381              13.9047
4         0.9444              54.4417
5            ...                  ...
6        26.3382               0.3846
7            ...                  ...
8        24.0553               2.2784
9            ...                  ...
10        2.8112              10.1104
11           ...                  ...
12      181.0478              51.6074
13           ...                  ...
14        0.0439              34.5188
15           ...                  ...
16        1.8851              49.1656</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
</section>
<section id="table-34-adding-the-squared-residuals---china-italy-spain-uk-us" class="level2" data-number="9.25">
<h2 data-number="9.25" class="anchored" data-anchor-id="table-34-adding-the-squared-residuals---china-italy-spain-uk-us"><span class="header-section-number">9.25</span> Table 34: Adding the Squared Residuals - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb286-9"><a href="#cb286-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>residual_baseline_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb286-10"><a href="#cb286-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>life_expectancy))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb286-11"><a href="#cb286-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² resid…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3     252. 
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9      49.4
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1      13.9
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944    54.4
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9     249. 
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.      262. 
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.       99.0
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3      17.2
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5      34.8
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8      81.0
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​residual_baseline_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb288-3"><a href="#cb288-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb288-4"><a href="#cb288-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb288-5"><a href="#cb288-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb288-6"><a href="#cb288-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb288-7"><a href="#cb288-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb288-8"><a href="#cb288-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb288-9"><a href="#cb288-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-10"><a href="#cb288-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb288-11"><a href="#cb288-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb288-12"><a href="#cb288-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb290-3"><a href="#cb290-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-4"><a href="#cb290-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb290-5"><a href="#cb290-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb290-6"><a href="#cb290-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb290-7"><a href="#cb290-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-8"><a href="#cb290-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb290-9"><a href="#cb290-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb290-10"><a href="#cb290-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-11"><a href="#cb290-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb290-12"><a href="#cb290-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb290-13"><a href="#cb290-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb290-14"><a href="#cb290-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-4"><a href="#cb291-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb291-5"><a href="#cb291-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb291-6"><a href="#cb291-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb291-7"><a href="#cb291-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-8"><a href="#cb291-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb291-9"><a href="#cb291-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb291-10"><a href="#cb291-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-11"><a href="#cb291-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb291-12"><a href="#cb291-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb291-13"><a href="#cb291-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb291-14"><a href="#cb291-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb291-15"><a href="#cb291-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-16"><a href="#cb291-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb291-17"><a href="#cb291-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb291-18"><a href="#cb291-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb291-19"><a href="#cb291-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-20"><a href="#cb291-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb291-21"><a href="#cb291-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-22"><a href="#cb291-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb291-23"><a href="#cb291-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-24"><a href="#cb291-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb291-25"><a href="#cb291-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-26"><a href="#cb291-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb291-27"><a href="#cb291-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-28"><a href="#cb291-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb291-29"><a href="#cb291-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb291-30"><a href="#cb291-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb291-31"><a href="#cb291-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-32"><a href="#cb291-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq residual_baseline_sq
1        72.3092              252.038
2        89.8679              49.3797
3        16.1381              13.9047
4         0.9444              54.4417
5            ...                  ...
6        26.3382               0.3846
7            ...                  ...
8        24.0553               2.2784
9            ...                  ...
10        2.8112              10.1104
11           ...                  ...
12      181.0478              51.6074
13           ...                  ...
14        0.0439              34.5188
15           ...                  ...
16        1.8851              49.1656</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb293-6"><a href="#cb293-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb293-7"><a href="#cb293-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb293-8"><a href="#cb293-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb293-9"><a href="#cb293-9" aria-hidden="true" tabindex="-1"></a>sum2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">bar{Y})^2$}"</span>,</span>
<span id="cb293-10"><a href="#cb293-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>residual_baseline_sq),</span>
<span id="cb293-11"><a href="#cb293-11" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>))</span>
<span id="cb293-12"><a href="#cb293-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb293-13"><a href="#cb293-13" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb293-14"><a href="#cb293-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb293-15"><a href="#cb293-15" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span>
<span id="cb293-16"><a href="#cb293-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
<div class="cell">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> (<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq)<span class="sc">/</span><span class="fu">sum</span>(example_df2<span class="sc">$</span>residual_baseline_sq))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3973218</code></pre>
</div>
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df2)</span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df2)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$residual_baseline_sq&lt;-(example_df2$life_expectancy</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - mean(example_df2$life_expectancy))^2</span></span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a>sst <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>residual_baseline_sq)</span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>ssr <span class="ot">&lt;-</span> <span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq)</span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> (ssr<span class="sc">/</span>sst)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3973218</code></pre>
</div>
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a>(sst <span class="sc">-</span> ssr)<span class="sc">/</span>sst</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3973218</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df2)</span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df2)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="table-35-adding-the-squared-residuals---china-italy-spain-uk-us" class="level2" data-number="9.26">
<h2 data-number="9.26" class="anchored" data-anchor-id="table-35-adding-the-squared-residuals---china-italy-spain-uk-us"><span class="header-section-number">9.26</span> Table 35: Adding the Squared Residuals - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb310-3"><a href="#cb310-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb310-4"><a href="#cb310-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb310-5"><a href="#cb310-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb310-6"><a href="#cb310-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb310-7"><a href="#cb310-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb310-8"><a href="#cb310-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb310-9"><a href="#cb310-9" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 7
   Entity              life_expectancy urbanization     b     a y_hat y_residu…¹
   &lt;chr&gt;                         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 Afghanistan                    45.4         18.6 0.225  49.7  53.9     72.3  
 2 Albania                        68.3         40.4 0.225  49.7  58.8     89.9  
 3 Algeria                        57.5         52.6 0.225  49.7  61.5     16.1  
 4 American Samoa                 68.6         79.8 0.225  49.7  67.7      0.944
 5 Andorra                        77.0         87.0 0.225  49.7  69.3     59.9  
 6 Angola                         45.1         37.5 0.225  49.7  58.2    171.   
 7 Antigua and Barbuda            71.2         32.4 0.225  49.7  57.0    202.   
 8 Argentina                      65.4         85.3 0.225  49.7  68.9     12.3  
 9 Armenia                        67.2         63.1 0.225  49.7  63.9     10.5  
10 Aruba                          70.3         48.1 0.225  49.7  60.5     94.8  
# … with 205 more rows, and abbreviated variable name ¹​y_residual_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb312-5"><a href="#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb312-6"><a href="#cb312-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb312-7"><a href="#cb312-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb312-8"><a href="#cb312-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb312-9"><a href="#cb312-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-10"><a href="#cb312-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb312-11"><a href="#cb312-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb312-12"><a href="#cb312-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb314-6"><a href="#cb314-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb314-7"><a href="#cb314-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-8"><a href="#cb314-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb314-9"><a href="#cb314-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb314-10"><a href="#cb314-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-11"><a href="#cb314-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb314-12"><a href="#cb314-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb314-13"><a href="#cb314-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb314-14"><a href="#cb314-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb315-3"><a href="#cb315-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-4"><a href="#cb315-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb315-5"><a href="#cb315-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb315-6"><a href="#cb315-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb315-7"><a href="#cb315-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-8"><a href="#cb315-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb315-9"><a href="#cb315-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb315-10"><a href="#cb315-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-11"><a href="#cb315-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb315-12"><a href="#cb315-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb315-13"><a href="#cb315-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb315-14"><a href="#cb315-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb315-15"><a href="#cb315-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-16"><a href="#cb315-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb315-17"><a href="#cb315-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb315-18"><a href="#cb315-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb315-19"><a href="#cb315-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-20"><a href="#cb315-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-21"><a href="#cb315-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-22"><a href="#cb315-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-23"><a href="#cb315-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-24"><a href="#cb315-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-25"><a href="#cb315-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-26"><a href="#cb315-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-27"><a href="#cb315-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-28"><a href="#cb315-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-29"><a href="#cb315-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb315-30"><a href="#cb315-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb315-31"><a href="#cb315-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-32"><a href="#cb315-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq
1        72.3092
2        89.8679
3        16.1381
4         0.9444
5            ...
6        26.3382
7            ...
8        24.0553
9            ...
10        2.8112
11           ...
12      181.0478
13           ...
14        0.0439
15           ...
16        1.8851</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb317-4"><a href="#cb317-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb317-5"><a href="#cb317-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb317-6"><a href="#cb317-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb317-7"><a href="#cb317-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb317-8"><a href="#cb317-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>))</span>
<span id="cb317-9"><a href="#cb317-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-10"><a href="#cb317-10" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb317-11"><a href="#cb317-11" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb317-12"><a href="#cb317-12" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:35 2023
</section>
<section id="table-36-calculating-the-x-residual---china-italy-spain-uk-us" class="level2" data-number="9.27">
<h2 data-number="9.27" class="anchored" data-anchor-id="table-36-calculating-the-x-residual---china-italy-spain-uk-us"><span class="header-section-number">9.27</span> Table 36: Calculating the X residual - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb324-9"><a href="#cb324-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>x_residual <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization,</span>
<span id="cb324-10"><a href="#cb324-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)), <span class="st">"- "</span>, <span class="fu">as.character</span>(<span class="fu">round</span>(<span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization),</span>
<span id="cb324-11"><a href="#cb324-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>)))</span>
<span id="cb324-12"><a href="#cb324-12" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² x_res…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3   18.612…
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9   40.444…
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1   52.609…
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944 79.762…
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9   87.043…
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.    37.54 …
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.    32.351…
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3   85.282…
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5   63.111…
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8   48.059…
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​x_residual</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb328-3"><a href="#cb328-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-4"><a href="#cb328-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb328-5"><a href="#cb328-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb328-6"><a href="#cb328-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb328-7"><a href="#cb328-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-8"><a href="#cb328-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb328-9"><a href="#cb328-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb328-10"><a href="#cb328-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-11"><a href="#cb328-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb328-12"><a href="#cb328-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb328-13"><a href="#cb328-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb328-14"><a href="#cb328-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-4"><a href="#cb329-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb329-5"><a href="#cb329-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb329-6"><a href="#cb329-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb329-7"><a href="#cb329-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-8"><a href="#cb329-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb329-9"><a href="#cb329-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb329-10"><a href="#cb329-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-11"><a href="#cb329-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb329-12"><a href="#cb329-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb329-13"><a href="#cb329-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb329-14"><a href="#cb329-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb329-15"><a href="#cb329-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-16"><a href="#cb329-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb329-17"><a href="#cb329-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb329-18"><a href="#cb329-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb329-19"><a href="#cb329-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-20"><a href="#cb329-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb329-21"><a href="#cb329-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-22"><a href="#cb329-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb329-23"><a href="#cb329-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-24"><a href="#cb329-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb329-25"><a href="#cb329-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-26"><a href="#cb329-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb329-27"><a href="#cb329-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-28"><a href="#cb329-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb329-29"><a href="#cb329-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb329-30"><a href="#cb329-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb329-31"><a href="#cb329-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-32"><a href="#cb329-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq      x_residual
1        72.3092 18.612 -  51.33
2        89.8679 40.444 -  51.33
3        16.1381 52.609 -  51.33
4         0.9444 79.762 -  51.33
5            ...             ...
6        26.3382 31.306 -  51.33
7            ...             ...
8        24.0553 66.397 -  51.33
9            ...             ...
10        2.8112 72.882 -  51.33
11           ...             ...
12      181.0478 79.163 -  51.33
13           ...             ...
14        0.0439 76.474 -  51.33
15           ...             ...
16        1.8851 26.304 -  51.33</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb331-6"><a href="#cb331-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb331-7"><a href="#cb331-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb331-8"><a href="#cb331-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb331-9"><a href="#cb331-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-10"><a href="#cb331-10" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb331-11"><a href="#cb331-11" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb331-12"><a href="#cb331-12" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:36 2023
</section>
<section id="table-37-calculating-the-x-residual-calculation---china-italy-spain-uk-us" class="level2" data-number="9.28">
<h2 data-number="9.28" class="anchored" data-anchor-id="table-37-calculating-the-x-residual-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.28</span> Table 37: Calculating the X residual calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb338-4"><a href="#cb338-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-5"><a href="#cb338-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb338-6"><a href="#cb338-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb338-7"><a href="#cb338-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb338-8"><a href="#cb338-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb338-9"><a href="#cb338-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>x_residual <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb338-10"><a href="#cb338-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization)</span>
<span id="cb338-11"><a href="#cb338-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² x_res…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3    -32.7 
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9    -10.9 
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1      1.28
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944   28.4 
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9     35.7 
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.     -13.8 
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.     -19.0 
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3     34.0 
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5     11.8 
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8     -3.27
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​x_residual</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb340-7"><a href="#cb340-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb340-8"><a href="#cb340-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb340-9"><a href="#cb340-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-10"><a href="#cb340-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb340-11"><a href="#cb340-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb340-12"><a href="#cb340-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb342-5"><a href="#cb342-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb342-6"><a href="#cb342-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb342-7"><a href="#cb342-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-8"><a href="#cb342-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb342-9"><a href="#cb342-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb342-10"><a href="#cb342-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-11"><a href="#cb342-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb342-12"><a href="#cb342-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb342-13"><a href="#cb342-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb342-14"><a href="#cb342-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-4"><a href="#cb343-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb343-5"><a href="#cb343-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb343-6"><a href="#cb343-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb343-7"><a href="#cb343-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-8"><a href="#cb343-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb343-9"><a href="#cb343-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb343-10"><a href="#cb343-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-11"><a href="#cb343-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb343-12"><a href="#cb343-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb343-13"><a href="#cb343-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb343-14"><a href="#cb343-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb343-15"><a href="#cb343-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-16"><a href="#cb343-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb343-17"><a href="#cb343-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb343-18"><a href="#cb343-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb343-19"><a href="#cb343-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-20"><a href="#cb343-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-21"><a href="#cb343-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-22"><a href="#cb343-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-23"><a href="#cb343-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-24"><a href="#cb343-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-25"><a href="#cb343-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-26"><a href="#cb343-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-27"><a href="#cb343-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-28"><a href="#cb343-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-29"><a href="#cb343-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb343-30"><a href="#cb343-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb343-31"><a href="#cb343-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-32"><a href="#cb343-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq x_residual
1        72.3092   -32.7179
2        89.8679   -10.8855
3        16.1381     1.2795
4         0.9444    28.4328
5            ...        ...
6        26.3382   -20.0238
7            ...        ...
8        24.0553    15.0678
9            ...        ...
10        2.8112    21.5524
11           ...        ...
12      181.0478    27.8332
13           ...        ...
14        0.0439    25.1443
15           ...        ...
16        1.8851   -25.0252</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb345-6"><a href="#cb345-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb345-7"><a href="#cb345-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb345-8"><a href="#cb345-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb345-9"><a href="#cb345-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-10"><a href="#cb345-10" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb345-11"><a href="#cb345-11" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb345-12"><a href="#cb345-12" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:36 2023
</section>
<section id="table-38-squaring-the-x-residuals---china-italy-spain-uk-us" class="level2" data-number="9.29">
<h2 data-number="9.29" class="anchored" data-anchor-id="table-38-squaring-the-x-residuals---china-italy-spain-uk-us"><span class="header-section-number">9.29</span> Table 38: Squaring the X residuals - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb352-2"><a href="#cb352-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb352-3"><a href="#cb352-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb352-4"><a href="#cb352-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb352-5"><a href="#cb352-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb352-6"><a href="#cb352-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb352-7"><a href="#cb352-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb352-8"><a href="#cb352-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb352-9"><a href="#cb352-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>x_residual_sq <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">round</span>(example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb352-10"><a href="#cb352-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization), <span class="dv">3</span>)), <span class="st">"$^2$"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb352-11"><a href="#cb352-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² x_res…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3   -32.71…
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9   -10.88…
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1   1.28$^…
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944 28.433…
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9   35.713…
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.    -13.79…
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.    -18.97…
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3   33.952…
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5   11.782…
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8   -3.27$…
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​x_residual_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb354-4"><a href="#cb354-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb354-5"><a href="#cb354-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb354-6"><a href="#cb354-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb354-7"><a href="#cb354-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb354-8"><a href="#cb354-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb354-9"><a href="#cb354-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb354-10"><a href="#cb354-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb354-11"><a href="#cb354-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb354-12"><a href="#cb354-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb356-2"><a href="#cb356-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb356-3"><a href="#cb356-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-4"><a href="#cb356-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb356-5"><a href="#cb356-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb356-6"><a href="#cb356-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb356-7"><a href="#cb356-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-8"><a href="#cb356-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb356-9"><a href="#cb356-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb356-10"><a href="#cb356-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-11"><a href="#cb356-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb356-12"><a href="#cb356-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb356-13"><a href="#cb356-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb356-14"><a href="#cb356-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb357-3"><a href="#cb357-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-4"><a href="#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb357-5"><a href="#cb357-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb357-6"><a href="#cb357-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb357-7"><a href="#cb357-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-8"><a href="#cb357-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb357-9"><a href="#cb357-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb357-10"><a href="#cb357-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-11"><a href="#cb357-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb357-12"><a href="#cb357-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb357-13"><a href="#cb357-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb357-14"><a href="#cb357-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb357-15"><a href="#cb357-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-16"><a href="#cb357-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb357-17"><a href="#cb357-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb357-18"><a href="#cb357-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb357-19"><a href="#cb357-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-20"><a href="#cb357-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb357-21"><a href="#cb357-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-22"><a href="#cb357-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb357-23"><a href="#cb357-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-24"><a href="#cb357-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb357-25"><a href="#cb357-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-26"><a href="#cb357-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb357-27"><a href="#cb357-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-28"><a href="#cb357-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb357-29"><a href="#cb357-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb357-30"><a href="#cb357-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb357-31"><a href="#cb357-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-32"><a href="#cb357-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq x_residual_sq
1        72.3092   -32.718$^2$
2        89.8679   -10.886$^2$
3        16.1381      1.28$^2$
4         0.9444    28.433$^2$
5            ...           ...
6        26.3382   -20.024$^2$
7            ...           ...
8        24.0553    15.068$^2$
9            ...           ...
10        2.8112    21.552$^2$
11           ...           ...
12      181.0478    27.833$^2$
13           ...           ...
14        0.0439    25.144$^2$
15           ...           ...
16        1.8851   -25.025$^2$</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb359-5"><a href="#cb359-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb359-6"><a href="#cb359-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb359-7"><a href="#cb359-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb359-8"><a href="#cb359-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb359-9"><a href="#cb359-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb359-10"><a href="#cb359-10" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb359-11"><a href="#cb359-11" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb359-12"><a href="#cb359-12" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:36 2023
</section>
<section id="table-39-squaring-the-x-residuals-calculation---china-italy-spain-uk-us" class="level2" data-number="9.30">
<h2 data-number="9.30" class="anchored" data-anchor-id="table-39-squaring-the-x-residuals-calculation---china-italy-spain-uk-us"><span class="header-section-number">9.30</span> Table 39: Squaring the X residuals calculation - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb366-3"><a href="#cb366-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb366-4"><a href="#cb366-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb366-5"><a href="#cb366-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb366-6"><a href="#cb366-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb366-7"><a href="#cb366-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb366-8"><a href="#cb366-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb366-9"><a href="#cb366-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>x_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb366-10"><a href="#cb366-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb366-11"><a href="#cb366-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² x_res…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3   1070.  
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9    118.  
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1      1.64
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944  808.  
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9   1275.  
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.     190.  
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.     360.  
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3   1153.  
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5    139.  
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8     10.7 
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​x_residual_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb368-6"><a href="#cb368-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb368-7"><a href="#cb368-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb368-8"><a href="#cb368-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb368-9"><a href="#cb368-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb368-10"><a href="#cb368-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb368-11"><a href="#cb368-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb368-12"><a href="#cb368-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb370-6"><a href="#cb370-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb370-7"><a href="#cb370-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-8"><a href="#cb370-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb370-9"><a href="#cb370-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb370-10"><a href="#cb370-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-11"><a href="#cb370-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb370-12"><a href="#cb370-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb370-13"><a href="#cb370-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb370-14"><a href="#cb370-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-4"><a href="#cb371-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb371-5"><a href="#cb371-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb371-6"><a href="#cb371-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb371-7"><a href="#cb371-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-8"><a href="#cb371-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb371-9"><a href="#cb371-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb371-10"><a href="#cb371-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-11"><a href="#cb371-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb371-12"><a href="#cb371-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb371-13"><a href="#cb371-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb371-14"><a href="#cb371-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb371-15"><a href="#cb371-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-16"><a href="#cb371-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb371-17"><a href="#cb371-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb371-18"><a href="#cb371-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb371-19"><a href="#cb371-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-20"><a href="#cb371-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb371-21"><a href="#cb371-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-22"><a href="#cb371-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb371-23"><a href="#cb371-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-24"><a href="#cb371-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb371-25"><a href="#cb371-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-26"><a href="#cb371-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb371-27"><a href="#cb371-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-28"><a href="#cb371-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb371-29"><a href="#cb371-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb371-30"><a href="#cb371-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb371-31"><a href="#cb371-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-32"><a href="#cb371-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq x_residual_sq
1        72.3092     1070.4623
2        89.8679      118.4943
3        16.1381        1.6372
4         0.9444      808.4251
5            ...           ...
6        26.3382      400.9521
7            ...           ...
8        24.0553      227.0391
9            ...           ...
10        2.8112       464.507
11           ...           ...
12      181.0478      774.6876
13           ...           ...
14        0.0439      632.2355
15           ...           ...
16        1.8851      626.2598</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb373-4"><a href="#cb373-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb373-5"><a href="#cb373-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb373-6"><a href="#cb373-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb373-7"><a href="#cb373-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb373-8"><a href="#cb373-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb373-9"><a href="#cb373-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-10"><a href="#cb373-10" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb373-11"><a href="#cb373-11" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb373-12"><a href="#cb373-12" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:36 2023
</section>
<section id="table-40-adding-the-sum-of-squared-residuals-from-x---china-italy-spain-uk-us" class="level2" data-number="9.31">
<h2 data-number="9.31" class="anchored" data-anchor-id="table-40-adding-the-sum-of-squared-residuals-from-x---china-italy-spain-uk-us"><span class="header-section-number">9.31</span> Table 40: Adding the Sum of Squared Residuals from X - China, Italy, Spain, UK, US</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_expectancy <span class="sc">~</span> urbanization, <span class="at">data =</span> example_df)</span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2253268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   49.69309 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> example_df</span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>b <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[[<span class="st">"urbanization"</span>]]</span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>a <span class="ot">&lt;-</span> mod<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_hat <span class="ot">&lt;-</span> example_df2<span class="sc">$</span>b <span class="sc">*</span> example_df2<span class="sc">$</span>urbanization <span class="sc">+</span></span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>a</span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>y_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>life_expectancy <span class="sc">-</span></span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true" tabindex="-1"></a>    example_df2<span class="sc">$</span>y_hat)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb380-9"><a href="#cb380-9" aria-hidden="true" tabindex="-1"></a>example_df2<span class="sc">$</span>x_residual_sq <span class="ot">&lt;-</span> (example_df2<span class="sc">$</span>urbanization <span class="sc">-</span></span>
<span id="cb380-10"><a href="#cb380-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(example_df2<span class="sc">$</span>urbanization))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb380-11"><a href="#cb380-11" aria-hidden="true" tabindex="-1"></a>example_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 215 × 8
   Entity              life_expectancy urban…¹     b     a y_hat y_res…² x_res…³
   &lt;chr&gt;                         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Afghanistan                    45.4    18.6 0.225  49.7  53.9  72.3   1070.  
 2 Albania                        68.3    40.4 0.225  49.7  58.8  89.9    118.  
 3 Algeria                        57.5    52.6 0.225  49.7  61.5  16.1      1.64
 4 American Samoa                 68.6    79.8 0.225  49.7  67.7   0.944  808.  
 5 Andorra                        77.0    87.0 0.225  49.7  69.3  59.9   1275.  
 6 Angola                         45.1    37.5 0.225  49.7  58.2 171.     190.  
 7 Antigua and Barbuda            71.2    32.4 0.225  49.7  57.0 202.     360.  
 8 Argentina                      65.4    85.3 0.225  49.7  68.9  12.3   1153.  
 9 Armenia                        67.2    63.1 0.225  49.7  63.9  10.5    139.  
10 Aruba                          70.3    48.1 0.225  49.7  60.5  94.8     10.7 
# … with 205 more rows, and abbreviated variable names ¹​urbanization,
#   ²​y_residual_sq, ³​x_residual_sq</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a>example_df2 <span class="ot">&lt;-</span> <span class="fu">with</span>(example_df2, example_df2[<span class="fu">order</span>(Entity),</span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb382-3"><a href="#cb382-3" aria-hidden="true" tabindex="-1"></a><span class="co"># match(example_df2$Entity=='China',</span></span>
<span id="cb382-4"><a href="#cb382-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_df2$Entity)</span></span>
<span id="cb382-5"><a href="#cb382-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which(example_df2$Entity=='China')</span></span>
<span id="cb382-6"><a href="#cb382-6" aria-hidden="true" tabindex="-1"></a>list_ctry_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Italy"</span>, <span class="st">"Spain"</span>,</span>
<span id="cb382-7"><a href="#cb382-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Afghanistan"</span>,</span>
<span id="cb382-8"><a href="#cb382-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Albania"</span>, <span class="st">"Algeria"</span>, <span class="st">"American Samoa"</span>, <span class="st">"Zimbabwe"</span>)</span>
<span id="cb382-9"><a href="#cb382-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb382-10"><a href="#cb382-10" aria-hidden="true" tabindex="-1"></a><span class="co"># list_ctry_interest&lt;-c('Afghanistan', 'Albania',</span></span>
<span id="cb382-11"><a href="#cb382-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Algeria', 'American Samoa', 'Zimbabwe')</span></span>
<span id="cb382-12"><a href="#cb382-12" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   3   4  41  96 182 204 205 215</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-4"><a href="#cb384-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb384-5"><a href="#cb384-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb384-6"><a href="#cb384-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb384-7"><a href="#cb384-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-8"><a href="#cb384-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb384-9"><a href="#cb384-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb384-10"><a href="#cb384-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-11"><a href="#cb384-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb384-12"><a href="#cb384-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb384-13"><a href="#cb384-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb384-14"><a href="#cb384-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> example_df2[example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span> list_ctry_interest,</span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rounding to 4 decimals</span></span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb385-6"><a href="#cb385-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">4</span>))</span>
<span id="cb385-7"><a href="#cb385-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-8"><a href="#cb385-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Making everything character</span></span>
<span id="cb385-9"><a href="#cb385-9" aria-hidden="true" tabindex="-1"></a>for_pres[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(for_pres, as.character)</span>
<span id="cb385-10"><a href="#cb385-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-11"><a href="#cb385-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the index</span></span>
<span id="cb385-12"><a href="#cb385-12" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">which</span>(example_df2<span class="sc">$</span>Entity <span class="sc">%in%</span></span>
<span id="cb385-13"><a href="#cb385-13" aria-hidden="true" tabindex="-1"></a>    list_ctry_interest))</span>
<span id="cb385-14"><a href="#cb385-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">cbind</span>(index, for_pres)</span>
<span id="cb385-15"><a href="#cb385-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-16"><a href="#cb385-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the row with elipses</span></span>
<span id="cb385-17"><a href="#cb385-17" aria-hidden="true" tabindex="-1"></a>list_to_be_added <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="fu">ncol</span>(for_pres))</span>
<span id="cb385-18"><a href="#cb385-18" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> for_pres <span class="sc">%&gt;%</span></span>
<span id="cb385-19"><a href="#cb385-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-20"><a href="#cb385-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-21"><a href="#cb385-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-22"><a href="#cb385-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-23"><a href="#cb385-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-24"><a href="#cb385-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-25"><a href="#cb385-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-26"><a href="#cb385-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-27"><a href="#cb385-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-28"><a href="#cb385-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-29"><a href="#cb385-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="sc">!!!</span><span class="fu">setNames</span>(list_to_be_added, <span class="fu">names</span>(.)),</span>
<span id="cb385-30"><a href="#cb385-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">15</span>)</span>
<span id="cb385-31"><a href="#cb385-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-32"><a href="#cb385-32" aria-hidden="true" tabindex="-1"></a>for_pres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   index         Entity life_expectancy urbanization      b       a   y_hat
1      1    Afghanistan         45.3833      18.6118 0.2253 49.6931 53.8868
2      2        Albania         68.2861      40.4442 0.2253 49.6931 58.8062
3      3        Algeria         57.5301      52.6092 0.2253 49.6931 61.5474
4      4 American Samoa         68.6375      79.7625 0.2253 49.6931 67.6657
5    ...            ...             ...          ...    ...     ...     ...
6     41          China         61.8792      31.3059 0.2253 49.6931 56.7471
7    ...            ...             ...          ...    ...     ...     ...
8     96          Italy         59.7496      66.3975 0.2253 49.6931 64.6542
9    ...            ...             ...          ...    ...     ...     ...
10   182          Spain         64.4387      72.8821 0.2253 49.6931 66.1154
11   ...            ...             ...          ...    ...     ...     ...
12   204 United Kingdom         54.0752      79.1629 0.2253 49.6931 67.5306
13   ...            ...             ...          ...    ...     ...     ...
14   205  United States         67.1343       76.474 0.2253 49.6931 66.9247
15   ...            ...             ...          ...    ...     ...     ...
16   215       Zimbabwe         54.2472      26.3045 0.2253 49.6931 55.6202
   y_residual_sq x_residual_sq
1        72.3092     1070.4623
2        89.8679      118.4943
3        16.1381        1.6372
4         0.9444      808.4251
5            ...           ...
6        26.3382      400.9521
7            ...           ...
8        24.0553      227.0391
9            ...           ...
10        2.8112       464.507
11           ...           ...
12      181.0478      774.6876
13           ...           ...
14        0.0439      632.2355
15           ...           ...
16        1.8851      626.2598</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>means1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{X}$}"</span>, <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(population_urbanization_mean, <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>,</span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb387-4"><a href="#cb387-4" aria-hidden="true" tabindex="-1"></a>means2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">bar{Y}$}"</span>, <span class="st">""</span>, <span class="fu">round</span>(population_life_expectancy_mean,</span>
<span id="cb387-5"><a href="#cb387-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>), <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>)</span>
<span id="cb387-6"><a href="#cb387-6" aria-hidden="true" tabindex="-1"></a>sum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (Y_{i} - </span><span class="sc">\\</span><span class="st">hat{Y})^2$}"</span>,</span>
<span id="cb387-7"><a href="#cb387-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>y_residual_sq),</span>
<span id="cb387-8"><a href="#cb387-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>), <span class="st">""</span>)</span>
<span id="cb387-9"><a href="#cb387-9" aria-hidden="true" tabindex="-1"></a>sum_x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textcolor{red}{$</span><span class="sc">\\</span><span class="st">sum_{i=1}^{n} (X_{i} - </span><span class="sc">\\</span><span class="st">bar{X})^2$}"</span>,</span>
<span id="cb387-10"><a href="#cb387-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="fu">round</span>(<span class="fu">sum</span>(example_df2<span class="sc">$</span>x_residual_sq),</span>
<span id="cb387-11"><a href="#cb387-11" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>))</span>
<span id="cb387-12"><a href="#cb387-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb387-13"><a href="#cb387-13" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means1)</span>
<span id="cb387-14"><a href="#cb387-14" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, means2)</span>
<span id="cb387-15"><a href="#cb387-15" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum1)</span>
<span id="cb387-16"><a href="#cb387-16" aria-hidden="true" tabindex="-1"></a>for_pres <span class="ot">&lt;-</span> <span class="fu">rbind</span>(for_pres, sum_x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
% latex table generated in R 4.2.2 by xtable 1.8-4 package % Sun Feb 5 16:53:36 2023
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">/</span>(<span class="dv">215</span> <span class="sc">-</span> <span class="dv">2</span>) <span class="sc">*</span> (<span class="fl">9636.138</span><span class="sc">/</span><span class="fl">125122.113</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.01901493</code></pre>
</div>
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = life_expectancy ~ urbanization, data = example_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.6401  -4.1417  -0.5023   5.0570  18.3322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.69309    1.07845   46.08   &lt;2e-16 ***
urbanization  0.22533    0.01901   11.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.726 on 213 degrees of freedom
Multiple R-squared:  0.3973,    Adjusted R-squared:  0.3945 
F-statistic: 140.4 on 1 and 213 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">9636.138</span><span class="sc">/</span><span class="fl">125122.113</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.07701387</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="script_lecture6-7_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>