#| echo: true
library(sf)
library(rnaturalearth)
world <- ne_countries(scale = "medium", returnclass = "sf")
world2<-subset(world, select = c(admin, adm0_a3, sovereignt, continent))
st_write(world2, "world.shp")
#| echo: true
library(sf)
library(rnaturalearth)
world <- ne_countries(scale = "medium", returnclass = "sf")
world2<-subset(world, select = c(admin, adm0_a3, sovereignt, continent))
st_write(world2, "/data/world.shp")
#| echo: true
library(sf)
library(rnaturalearth)
world <- ne_countries(scale = "medium", returnclass = "sf")
world2<-subset(world, select = c(admin, adm0_a3, sovereignt, continent))
st_write(world2, "./data/world.shp")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world.shp", layer = "SHAPEFILE")
knitr::opts_chunk$set(fig.width = 9, fig.height = 4)
#Setting path
library("dplyr")
setwd("/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/")
#Step1: Loading the data
life_expectancy <- read.csv(file = './life-expectancy.csv')
urbanization <- read.csv(file = './share-of-population-urban.csv')
life_expectancy<-subset(life_expectancy, Year>1900)
urbanization<-subset(urbanization, Year>1900)
life_expectancy2<-life_expectancy%>%
group_by(Code, Entity)%>%
summarize(life_expectancy=mean(Life.expectancy.at.birth..historical.))
#Removing continents
life_expectancy3<-subset(life_expectancy2, life_expectancy2$Code!="")
#Selecting only relevant vars
#Removing unnecessary files
rm(life_expectancy, life_expectancy2)
#EU Countries
eu_countries<-c("Austria",
"Belgium",
"Bulgaria",
"Croatia",
"Cyprus",
"Czechia",
"Denmark",
"Estonia",
"Finland",
"France",
"Germany",
"Greece",
"Hungary",
"Ireland",
"Italy",
"Latvia",
"Lithuania",
"Luxembourg",
"Malta",
"Netherlands",
"Poland",
"Portugal",
"Romania",
"Slovakia",
"Slovenia",
"Spain",
"Sweden")
latam_countries<-c("Belize",
"Costa Rica",
"El Salvador",
"Guatemala",
"Honduras",
"Mexico",
"Nicaragua",
"Panama",
"Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela",
"Cuba",
"Dominican Republic",
"Haiti")
life_expectancy3$continent[life_expectancy3$Entity  %in% eu_countries]<-"EU"
#unique(life_expectancy3$continent)
urbanization2<-urbanization%>%
group_by(Code)%>%
summarize(urbanization=mean(Urban.population....of.total.population.))
#Removing continents
urbanization3<-subset(urbanization2, urbanization2$Code!="")
#Selecting only relevant vars
#Removing unnecessary dataframes
rm(urbanization, urbanization2)
final<-left_join(life_expectancy3, urbanization3, by = c("Code"="Code"))
#Removing unnecessary dataframes
rm(life_expectancy3, urbanization3)
#final_new<-na.omit(final)
final_new<-subset(final, select = c(Entity, Code, life_expectancy, urbanization))
final_new$type<-NA
final_new$type<-"Everything Else"
final_new$type[final_new$Entity %in% latam_countries]<-"Latin America"
final_new$type[final_new$Entity %in% eu_countries]<-"EU"
#write.csv(final_new, "/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week4/data/life_exp_urb.csv", row.names=FALSE)
library(sf)
library(rnaturalearth)
world <- ne_countries(scale = "medium", returnclass = "sf")
world2<-subset(world, select = c(admin, adm0_a3, sovereignt, continent))
merged<-left_join(world2, final_new, by = c("adm0_a3" = "Code"))
#glimpse(merged)
library(ggplot2)
ggplot() +
geom_sf() +
geom_sf(data = merged, aes(fill = life_expectancy))
ggplot() +
geom_sf() +
geom_sf(data = merged, aes(fill = life_expectancy))
#| echo: false
library(sf)
library(rnaturalearth)
world <- ne_countries(scale = "medium", returnclass = "sf")
world2<-subset(world, select = c(admin, adm0_a3, sovereignt, continent))
#st_write(world2, "./data/world_shp/world.shp")
#| echo: true
#Setting path
library("dplyr")
setwd("/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/")
#Step1: Loading the data
life_expectancy <- read.csv(file = './life_exp_urb.csv')
head(life_expectancy, n=3)
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world.shp", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = ".\world_shp\world.shp", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world.shp", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/world_shp/world.shp", layer = "SHAPEFILE")
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/world_shp/world.shp")
head(world, n=3)
#| echo: true
#Step1: Loading the data
world <- read_sf(dsn = "./world_shp/world.shp")
#| echo: true
#Step1: Loading the data
setwd("/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/")
world <- read_sf(dsn = "./world_shp/world.shp")
head(world, n=3)
list.files("./world_shp/")
list.files("/Users/bgpopescu/Library/CloudStorage/Dropbox/john_cabot/teaching/big_data/week5/data/world_shp/")
